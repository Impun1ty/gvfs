2008-03-01  David Zeuthen  <davidz@redhat.com>

	* daemon/gvfsbackendcdda.c (do_mount): Avoid calling
	cddio_cddap_close() twice on an error path.

2008-03-01  Benjamin Otte  <otte@gnome.org>

	* daemon/gvfsbackendftp.c: (run_list_command):
	close the data connection before trying to receive the OK. Some
	servers send it out only after the connection was closed properly and
	otherwise cause stalls.

2008-03-01  Benjamin Otte  <otte@gnome.org>

	* daemon/gvfsbackendftp.c: (do_mount):
	use 0 as port in the keyring when it's the default ftp port. Stops the
	access dialog fro printing the port name.

2008-03-01  Bastien Nocera  <hadess@hadess.net>

	* daemon/gvfsbackendobexftp.c (_query_file_info_helper):
	Fix another case where the icon name was wrong for the
	root folder (Helps: #519369)

2008-03-01  Benjamin Otte  <otte@gnome.org>

	* daemon/Makefile.am:
	* daemon/ParseFTPList.c:
	* daemon/ParseFTPList.h:
	* daemon/gvfsbackendftp.c: (ftp_connection_cd), (process_line),
	(run_list_command), (do_query_info), (do_enumerate):
	rewrite directory enumeration and query_info by using the LIST parsing
	code from Mozilla. It was the only code I could find that was LGPL
	licensed, even though it looks way out of date.
	Also, error messages are handled way better and the code even copes
	somewhat with symlinks.

2008-02-29  Bastien Nocera  <hadess@hadess.net>

	* daemon/gvfsbackendobexftp.c (_get_icon_from_type):
	Use better icons for the devices

2008-02-29  Bastien Nocera  <hadess@hadess.net>

	* daemon/gvfsbackendobexftp.c (_get_icon_from_type),
	(_get_type_from_class), (_get_device_properties),
	(do_mount): When getting the remote device's name, also get
	its class, so we can use device specific icons instead of the 
	standard Bluetooth icon (Closes: #519369)

2008-02-29  Benjamin Otte  <otte@gnome.org>

	* daemon/gvfsbackendftp.c: (ftp_error_set_from_response),
	(ftp_connection_parse_features), (ftp_filename_from_gvfs_path),
	(ftp_filename_to_gvfs_path), (ftp_filename_construct),
	(do_open_for_read), (do_create), (do_append), (do_replace),
	(do_set_display_name), (g_vfs_backend_ftp_class_init):
	introduce a differentiation between gvfs paths and ftp filenames and
	use it. Also implement set_display_name.

2008-02-29  Benjamin Otte  <otte@gnome.org>

	* common/gdbusutils.c: (dbus_source_add_watch):
	* daemon/dbus-gmain.c: (connection_setup_add_watch):
	use the right names for dbus version macros

2008-02-29  Bastien Nocera  <hadess@hadess.net>

	* daemon/gvfsbackendobexftp.c (is_connected), (do_mount),
	(do_open_for_read), (is_busy), (do_read), (do_query_info),
	(do_query_fs_info), (do_enumerate), (do_delete),
	(do_make_directory): Don't use a temporary error to set
	jobs as failed, use g_vfs_job_failed instead
	Error out properly when trying to open a directory for read

2008-02-29  Bastien Nocera  <hadess@hadess.net>

	* daemon/gvfsbackendobexftp.c (g_vfs_backend_obexftp_finalize),
	(_retrieve_folder_listing), (_query_file_info_helper),
	(do_open_for_read), (do_query_info), (do_query_fs_info),
	(do_enumerate), (do_delete): Use a convenience function
	to load directory listings, implement a simple cache there
	that keeps folder listings for 3 seconds (should speed up
	folder enumeration followed by info fetching, as well
	as checking for non-existant files)

2008-02-29  Alexander Larsson  <alexl@redhat.com>

        * daemon/gvfsdaemonutils.[ch]:
	Rename gvfs_file_info_populate_names() to
        gvfs_file_info_populate_names_as_local() and
	add docs explaining when to use this function
	and when not to.

2008-02-29  Alexander Larsson  <alexl@redhat.com>

        * daemon/gvfsdaemonutils.c:
        (gvfs_file_info_populate_content_types):
	Use g_content_type_get_icon() for the icon mapping.
	Use folder, not folder-remote for icon. I don't
	think we should use folder-remote for things like
	shares, not normal folders.

2008-02-29  Cosimo Cecchi  <cosimoc@gnome.org>

	* daemon/gvfsbackendcomputer.c: (recompute_files),
	(mount_volume_from_drive), (report_no_media_error),
	(poll_for_media_cb), (try_mount_mountable):
	Implement media polling for Computer backend, handling the case when
	no media is in the drive. Also adds a new string. (#514135)

2008-02-29  Wouter Bolsterlee  <wbolster@svn.gnome.org>

	* daemon/gvfsbackendnetwork.c (g_vfs_network_daemon_init):

	Added another translator comment.

2008-02-29  Wouter Bolsterlee  <wbolster@svn.gnome.org>

	* daemon/gvfsbackendftp.c (do_mount):

	Added translator comment.

2008-02-29  Wouter Bolsterlee  <wbolster@svn.gnome.org>

	* daemon/gvfsbackendftp.c (g_vfs_backend_ftp_pop_connection):

	Reuse existing string to reduce the impact of the string
	freeze breaks.

2008-02-28  Benjamin Otte  <otte@gnome.org>

	* daemon/gvfsbackendftp.c: (do_mount):
	actually translate the display name

2008-02-28  A. Walton  <awalton@svn.gnome.org>

	* daemon/gvfsbackendnetwork.c: (g_vfs_network_daemon_init):
	* daemon/gvfsbackendnetwork.h:
	Set the default name for the network backend to prevent 
	possible confusion about "NETWORK Filesystem Service".

2008-02-28  Benjamin Otte  <otte@gnome.org>

	* daemon/gvfsbackendftp.c: (do_mount):
	really check for errors correctly. I need to go to bed.

2008-02-28  Benjamin Otte  <otte@gnome.org>

	* daemon/gvfsbackendftp.c: (do_mount):
	check for errors correctly

2008-02-28  Benjamin Otte  <otte@gnome.org>

	reviewed by: A. Walton  <awalton@svn.gnome.org>

	* daemon/daemon-main-generic.c: (main):
	* daemon/daemon-main.c: (daemon_setup):
	* daemon/daemon-main.h:
	* daemon/gvfsbackendcdda.c: (g_vfs_cdda_daemon_init):
	* daemon/gvfsbackendcdda.h:
	* daemon/gvfsbackendsmb.c: (g_vfs_smb_daemon_init):
	* daemon/gvfsbackendsmb.h:
	* daemon/gvfsbackendsmbbrowse.c: (g_vfs_smb_browse_daemon_init):
	* daemon/gvfsbackendsmbbrowse.h:
	provide default application names for the daemons. This is necessary
	to avoid gnome-keyring from saying "Application" wants access to the
	keyring, which could sound very evil for a casual user.
	Adds some more strings for the poor translators, too!

2008-02-28  Benjamin Otte  <otte@gnome.org>

	* daemon/gvfsbackendftp.c: (do_mount), (try_mount):
	rewrite login code to use the keyring if available. Also fix mount
	specs to be unique and display names to list the user while at it.

2008-02-28  A. Walton  <awalton@svn.gnome.org>

	* daemon/Makefile.am:
	Really disable FTP if we don't HAVE_HTTP.

2008-02-28  A. Walton  <awalton@svn.gnome.org>

	* daemon/gvfsbackendnetwork.c: (recompute_files):
	Fixup DNS-SD exposed links to actually link to the service provided.

2008-02-28  Christian Kellner  <gicmo@gnome.org>

	* daemon/gvfsbackenddav.c (g_vfs_backend_dav_init): 
	Mark the dav backend as user visible.

2008-02-28  Benjamin Otte  <otte@gnome.org>

	* daemon/gvfsbackendftp.c: (ftp_connection_create),
	(ftp_connection_login), (ftp_connection_use), (ftp_connection_new):
	split out login code, so we can try multiple auths when some fail.

2008-02-28  Benjamin Otte  <otte@gnome.org>

	* daemon/gvfsdaemonutils.c: (gvfs_file_info_populate_default),
	(gvfs_file_info_populate_names),
	(gvfs_file_info_populate_content_types):
	* daemon/gvfsdaemonutils.h:
	add functions that are supposed to set default values on a remote file
	info structure, so we don't duplicate the code across multiple
	backends.

	* daemon/gvfsbackendftp.c: (ftp_error_set_from_response),
	(ftp_connection_new), (file_info_get_flags), (file_info_query):
	use it.

2008-02-28  Alexander Larsson  <alexl@redhat.com>

        * client/gdaemonvolumemonitor.c:
        (mount_added):
        (mount_removed):
	Emit signals outside of the lock to avoid
	deadlocks (#519250)

2008-02-28  Bastien Nocera  <hadess@hadess.net>

	* daemon/gvfsbackendobexftp-fl-parser.c (fl_parser_start_node_cb):
	Fix the content-type of directories (inode/directory, not
	x-directory/normal as in gnome-vfs)
	Set file icons from the content-type

	* daemon/gvfsbackendobexftp.c (_change_directory):
	Add a FIXME, trying to change to a non-existant directory
	errors out with "permission denied", which isn't the case

	(_query_file_info_helper): set the right content-type and icon
	for the root folder

	(is_connected), (do_mount): Wait until we're connected to exit from
	do_mount()

	(do_open_for_read): Fix a crash when opening an inexistant file for
	read

2008-02-28  Benjamin Otte  <otte@gnome.org>

	* daemon/gvfsbackendftp.c: (ftp_error_set_from_response),
	(file_info_query), (do_query_info):
	Set sane error messages for ftp error codes.
	Also remove some excessive debug messages.

2008-02-28  Benjamin Otte  <otte@gnome.org>

	* daemon/gvfsbackendftp.c: (do_mount):
	fix typo (thanks Andre)

2008-02-28  Benjamin Otte  <otte@gnome.org>

	* daemon/gvfsbackendftp.c: (ftp_connection_sendv),
	(ftp_connection_send), (do_start_write), (do_create), (do_append),
	(do_replace), (g_vfs_backend_ftp_class_init):
	implement append

2008-02-28  Benjamin Otte  <otte@gnome.org>

	gcc warning fixes to be able to compile with -Werror:
	* daemon/gvfsbackendburn.c:
	mark virtual_node_ref as unused, because it is
	* test/benchmark-common.c: (benchmark_timeout):
	signal handlers take an int argument.

2008-02-28  Benjamin Otte  <otte@gnome.org>

	* configure.ac:
	list FTP in configuration summary, too

2008-02-28  Benjamin Otte  <otte@gnome.org>

	* daemon/Makefile.am:
	* daemon/gvfsbackendftp.c:
	* daemon/gvfsbackendftp.h:
	drop my current FTP code and continue development in here. Should make
	testing easier for adventurous people.

2008-02-28  Bastien Nocera  <hadess@hadess.net>

	* daemon/gvfsbackendobexftp.c (do_query_info): Add
	missing mutex unlock, duh!

2008-02-28  Benjamin Otte  <otte@gnome.org>

	* daemon/gvfsjobenumerate.c: (g_vfs_job_enumerate_add_infos):
	* daemon/gvfsjobenumerate.h:
	constify list argument, so ownership is apparent.

2008-02-28  Bastien Nocera  <hadess@hadess.net>

	* daemon/gvfsbackendobexftp-fl-parser.c (fl_parser_start_node_cb):
	Set the content-type on files by having a good guess if we didn't
	get a mime-type from the folder listings

2008-02-27  Benjamin Otte  <otte@gnome.org>

	* programs/gvfs-mount.c: (prompt_for):
	don't mess up my terminal when entering passwords

2008-02-27  Bastien Nocera  <hadess@hadess.net>

	* client/test-uri-utils.c: add test for obex URIs
	* configure.ac: Require expat for the obexftp backend
	* daemon/Makefile.am:
	* daemon/gvfsbackendobexftp-cap-parser.c:
	* daemon/gvfsbackendobexftp-cap-parser.h:
	* daemon/gvfsbackendobexftp-fl-parser.c:
	* daemon/gvfsbackendobexftp-fl-parser.h:
	Added ObexFTP folder listing and capability parser from
	gnome-vfs-obexftp, ported to gio

	* daemon/gvfsbackendobexftp.c:
	* daemon/gvfsbackendobexftp.h:
	* daemon/obexftp-marshal.list:
	* daemon/obexftp.mount.in: Add read-only ObexFTP backend

	(Closes: #509621)

2008-02-27  Luca Ferretti  <elle.uca@libero.it>

	* daemon/gvfsbackendcdda.c: (do_query_info):
	Make "file don't exist" message conform to other backends;
	no, it isn't a string freeze break, the message yet exists
	elsewhere.

2008-02-27  Benjamin Otte  <otte@gnome.org>

	* common/gmountsource.c: (g_mount_source_ask_question_finish):
	Set out parameters for questions, too.

2008-02-27  Benjamin Otte  <otte@gnome.org>

	* common/gmountsource.c: (g_mount_source_ask_password_finish):
	Set out parameters even in error case.

2008-02-26  Christian Kellner  <gicmo@gnome.org>

	* daemon/gvfsbackenddav.c: (do_delete):
	Correct error domain in case delete failed.

2008-02-26  Christian Kellner  <gicmo@gnome.org>

	* daemon/gvfsbackenddav.c:
	Redo authentication and implement keyring support. Based
	on a patch by Carlos Garcia Campos.

2008-02-26  Alexander Larsson  <alexl@redhat.com>

        * programs/gvfs-bash-completion.sh:
        * programs/gvfs-ls.c:
	Better completion

2008-02-26  Alexander Larsson  <alexl@redhat.com>

	* daemon/gvfsjobmount.c (run):
	No need to ref backend specifically now, as
	the core refs the job and the job refs the
	backend. Revert that change.

2008-02-26  Alexander Larsson  <alexl@redhat.com>

        * daemon/gvfsjob.c:
        (g_vfs_job_run):
        (g_vfs_job_try):
	Ref job while calling out.
	
        * daemon/gvfsjobmount.c:
	Own ref to backend while job is alive.

2008-02-26  Carlos Garcia Campos  <carlosgc@gnome.org>

	* daemon/gvfsbackendsmb.c: (auth_callback):
	Fix parameters order in keyring lookup call.
	
2008-02-26  Yanko Kaneti  <yaneti@declera.com>

	* configure.ac: explicitly depend on libxml-2.0 
	for building the dav backend.

2008-02-26  Benjamin Otte  <otte@gnome.org>

	* common/gmountsource.c: (ask_password_reply),
	(g_mount_source_ask_password_async), (ask_question_reply),
	(g_mount_source_ask_question_async):
	make errors say "Internal Error" instead of failing

2008-02-26  Benjamin Otte  <otte@gnome.org>

	* daemon/gvfsjobmount.c: (run), (try):
	use ref/unref pair to stop backend from going away when the mount
	fails

2008-02-26  Benjamin Otte  <otte@gnome.org>

	* daemon/gvfsjobmount.c: (mount_failed):
	no g_warning for failed monts, please

2008-02-26  Benjamin Otte  <otte@gnome.org>

	* daemon/gvfsjob.c: (g_vfs_job_failed_from_error):
	* daemon/gvfsjob.h:
	make the error argument const

2008-02-26  Alexander Larsson  <alexl@redhat.com>

        * client/gdaemonvolumemonitor.c:
	Use standard lock instead of recursive lock.

2008-02-25  David Zeuthen  <davidz@redhat.com>

	* configure.ac: fix typo in AC_ARG_ENABLE for gphoto2

2008-02-25  Alexander Larsson  <alexl@redhat.com>

        * common/gdbusutils.c:
        * daemon/dbus-gmain.c:
	Only use dbus_watch_get_unix_fd for
	dbus >= 1.1.1

2008-02-25  Alexander Larsson  <alexl@redhat.com>

	* configure.ac:
	Post release version bump

=== gvfs 0.1.8 ===

2008-02-25  Alexander Larsson  <alexl@redhat.com>

	* programs/Makefile.am (EXTRA_DIST):
	Add gvfs-bash-completion.sh

	* NEWS:
	Update for release

2008-02-25  Carlos Garcia Campos  <carlosgc@gnome.org>

	* daemon/gvfsbackendsftp.c:
	* daemon/gvfsbackendsmb.c:
	Update to gvfskeyring api changes

	* daemon/gvfskeyring.c:
	* daemon/gvfskeyring.h:
	Add object, authtype and port parameters for both save and
	lookup. 
	
2008-02-25  Christian Kellner  <gicmo@gnome.org>

	* daemon/gvfsbackenddav.c: 
	Initial take on implementing delete.

	* daemon/gvfsbackendhttp.c:
	* daemon/gvfsbackendhttp.h:
	Add http_error_code_from_status helper function.

2008-02-25  Christian Kellner  <gicmo@gnome.org>

	* daemon/gvfsbackenddav.c: 
	Also check if the URL is a directory by doing a PROPFIND in
	addition to the OPTIONS. That will also force authentication
	since some servers (e.g. Zope) allow OPTIONS without doing
	authentication.

2008-02-25  Alexander Larsson  <alexl@redhat.com>

        * client/sftpuri.c:
	Make sure both no-port and port 22 refer to the same mount.
	
        * daemon/gvfsbackendsftp.c:
	Support ports. (#518504)

2008-02-25  Christian Kellner  <gicmo@gnome.org>

	* daemon/gvfsbackenddav.c:
	Keep the SoupMessage around for as long as Multistatus is
	valid.

2008-02-25  Christian Kellner  <gicmo@gnome.org>

	* daemon/gvfsbackenddav.c: 
	* daemon/gvfsbackendhttp.c:
	* daemon/gvfsbackendhttp.h:
	Add a SoupSessionAsync to be used for SoupInputStream doesn't
	yet work with SoupSessionSync. Also make sure we share
	authentication.

2008-02-25  Christian Kellner  <gicmo@gnome.org>

	* daemon/gvfsbackenddav.c: 
	- Port the mount operation to use the sync i/op.
	- Keep the auth information around so we can use them again in
	the case that a subpath requires different authentication. This
	is needed since libsoup will forgot all auth after a 401.
	- Ignore trailing slashes in ms_response_is_target ().
	- Add an initial version of make_directory ().
	* daemon/gvfsbackendhttp.c: 
	* daemon/gvfsbackendhttp.h:
	Add message_new_from_filename_full which will add a trailing "/"
	if is_dir is true. (Saves uneccesary redirects in some cases)

	Various bits and pieces came from Yann Rouillard.

2008-02-25  Alexander Larsson  <alexl@redhat.com>

        * daemon/gvfsbackendsmb.c:
	Support gnome-keyring (#511517)
	Patch from Carlos Garcia Campos

2008-02-25  Alexander Larsson  <alexl@redhat.com>

	* daemon/gvfsbackendnetwork.c (recompute_files):
	Fix spelling inconsistency "Network" vs "network" (#518487)
	
2008-02-25  Alexander Larsson  <alexl@redhat.com>

	* client/gdaemonvfs.c (get_mountspec_from_uri):
	g_uri_get_scheme -> g_uri_parse_scheme

2008-02-25  Wouter Bolsterlee  <wbolster@svn.gnome.org>

	* hal/ghalvolume.c (do_update_from_hal_for_camera): Add
	two translator comments.

2008-02-24  David Zeuthen  <davidz@redhat.com>

	* client/gdaemonfile.c:
	* client/gdaemonvolumemonitor.c:
	* client/gdaemonvolumemonitor.h: Prefer to return a GDaemonMount
	from an existing GDaemonVolumeMonitor rather than rolling our own
	for GDaemonFile's g_file_find_enclosing_mount()
	implementation. This is to ensure that g_mount_get_volume() will
	work properly with mounts that are adopted by GVolume objects from
	other volume monitors.

	* configure.ac: Check for libgphoto2

	* daemon/Makefile.am:
	* daemon/gvfsbackendcdda.c: Use HAL to detect when the disc is
	removed and then forcibly unmount the mount. Report size of
	disc. Hint the file manager to preview files.

	* hal/ghaldrive.c:
	* hal/ghalmount.c:
	* hal/ghalvolume.c:
	* hal/ghalvolumemonitor.c:
	* hal/ghalvolumemonitor.h:
	* hal/hal-pool.c: Ensure that audio and blank CD's are
	displayed (#514139).  Read info.desktop.[icon|name] properties
	from hal and use these if found. Use proper icon for audio players
	and make the gphoto2 detection support it as well. Also check for
	subsystem when filtering on hal capabilities. Also revert the
	commit to ignore NFS mounts as gio will now only report an user
	visible mount if it's in /media or $HOME. Make LUKS encrypted
	volumes work.

	* daemon/Makefile.am:
	* daemon/gphoto2.mount.in:
	* daemon/gvfsbackendgphoto2.c:
	Land the gphoto2 backend.

	* programs/Makefile.am:
	* programs/gvfs-ls.c: Make the --hidden option work. Default
	to short listing and add a --long option. Implement new options
	--show-completions and --show-mounts that can be used for
	shell completions.
	* programs/gvfs-tree.c: New program
	* programs/gvfs-bash-completion.sh: Bash completion for gvfs;
	uses the new --show-completions and --show-mounts options in
	gvfs-ls.

2008-02-25  Alexander Larsson  <alexl@redhat.com>

        * daemon/gvfsbackendnetwork.c:
	Add monitoring of inlined locations. (#509600)
	Patch from A. Walton

2008-02-22  A. Walton  <awalton@svn.gnome.org>

	* daemon/gvfsbackendnetwork.c: (recompute_files):
        Make network:// really add extra domain links.

2008-02-22  A. Walton  <awalton@svn.gnome.org>

	* daemon/gvfsbackendnetwork.c: (recompute_files):
        Fix typo so we generate correct dns-sd links.

2008-02-22  Alexander Larsson  <alexl@redhat.com>

        * daemon/gvfsbackendnetwork.c:
        (g_vfs_backend_network_init):
	Fix up dns-sd method name and gconf directory.

2008-02-22  Alexander Larsson  <alexl@redhat.com>

        * daemon/dns-sd.mount.in:
	Correct type and exec name

2008-02-22  Alexander Larsson  <alexl@redhat.com>

        * common/gmounttracker.c:
	Unlock lock if returning early.

2008-02-22  Alexander Larsson  <alexl@redhat.com>

        * configure.ac:
        * daemon/Makefile.am:
        * daemon/dns-sd.mount.in:
        * daemon/gvfsbackenddnssd.[ch]:
	Landed initial version of dns-sd backend.

2007-02-22  Christian Neumair  <cneumair@gnome.org>

	* gconf/gconf-module.c: (g_io_module_load):
	* gconf/Makefile.am:
	* hal/hal-module.c: (g_io_module_load):
	* hal/Makefile.am:
	* client/gdaemonvfs.c: (g_daemon_vfs_init):
	* client/Makefile.am:
	Bind to GVFS text domain. Fixes #517892.

2008-02-22  Alexander Larsson  <alexl@redhat.com>

        * daemon/gvfsbackendnetwork.c:
	Fix up network_file_equal.
	
2008-02-22  Alexander Larsson  <alexl@redhat.com>

        * daemon/gvfsbackendnetwork.c:
	Update the network backend to use inline files and
	remove the default workgroup link. Also add dns-sd
	support (not used yet). (#509600)
	Patch from A. Walton

2008-02-22  Carlos Garcia Campos  <carlosgc@gnome.org>

	* daemon/gvfsbackendsftp.c: (handle_login), (do_mount):
	Ask for the username in the sftp login when it's not
	provided. (#511509)
	
2008-02-21  Christian Persch  <chpe@gnome.org>

	* configure.ac: Update hal req to 0.5.10. Bug #515779.

2008-02-21  Carlos Garcia Campos  <carlosgc@gnome.org>

	* daemon/gvfsbackendsftp.c: (handle_login):
	Fix memory leak.
	
2008-02-21  Carlos Garcia Campos  <carlosgc@gnome.org>

	* daemon/gvfsbackendsftp.c: (handle_login):
	Fix password save flags initialization.
	
2008-02-21  Alexander Larsson  <alexl@redhat.com>

	* configure.ac (DISTCHECK_CONFIGURE_FLAGS):
	Require latest glib for the contains_file
	change.

2008-02-21  Alexander Larsson  <alexl@redhat.com>

        * client/gdaemonfile.c:
        (g_daemon_file_prefix_matches):
        (g_daemon_file_file_iface_init):
	Update for the contains_file rename in gio.

2008-02-20  Alexander Larsson  <alexl@redhat.com>

        * daemon/Makefile.am:
        * daemon/gvfsbackendsmb.c:
        * daemon/gvfsbackendsmbbrowse.c:
	If gconf availible, initialize default workgroup
	from gconf.
	Handle X-GNOME-DEFAULT-WORKGROUP special case
	to list the current workgroup

2008-02-20  Alexander Larsson  <alexl@redhat.com>

	* daemon/daemon-main.c (send_spawned):
	Fix "_" spew.
	
2008-02-20  Alexander Larsson  <alexl@redhat.com>

	* daemon/gvfsbackendsftp.c:
	Fix spelling in string

2008-02-20  Alexander Larsson  <alexl@redhat.com>

        * common/gmountsource.[ch]:
	Add ask_question support

        * daemon/gvfsbackendsftp.c:
	Handle host identity changed messages (#517460)

	Patch from Carlos Garcia Campos

2008-02-20  Alexander Larsson  <alexl@redhat.com>

        * daemon/Makefile.am:
        * daemon/gvfsbackendnetwork.[ch]:
        * daemon/network.mount.in: 
	Initial network backend work (#509600)

2008-02-19  Alexander Larsson  <alexl@redhat.com>

        * daemon/gvfsbackendsftp.c:
	Authentication fixups (#511517)
	Patch from Carlos Garcia Campos

2008-02-19  Alexander Larsson  <alexl@redhat.com>

        * daemon/gvfsbackendsftp.c:
        * daemon/gvfsbackendtrash.c:
        * gconf/gapplookupgconf.c:
        * test/benchmark-common.c:
	Some more cleanup.

2008-02-19  Alexander Larsson  <alexl@redhat.com>

	* lots of *.c files:
	Code cleanup from Kjartan:
	Removes unused code/variables.
	Uses right printf types
	Uses non-deprecated dbus calls.
	Removes spurious ; and ,
	deleted extra checks for NULL for g_free

2008-02-18  Alexander Larsson  <alexl@redhat.com>

        * hal/ghalmount.c:
	Cleanups of case insensitive search. (#154549)
	patch from John Millikin.

2008-02-18  Alexander Larsson  <alexl@redhat.com>

	* daemon/gvfsjobenumerate.c (g_vfs_job_enumerate_add_info):
	Ensure we're using "/" as separator for uris.
	This only affects win32, which probably doesn't work atm, but
	still its nice to be explicit.
	
2008-02-18  Alexander Larsson  <alexl@redhat.com>

        * configure.ac:
	Detect gnome-keyring
	
        * common/gmountsource.[ch]:
	Add password out to ask_password
	
        * daemon/Makefile.am:
        * daemon/gvfskeyring.[ch]:
	Helper code for keyring support
	
        * daemon/gvfsbackendsftp.c:
	Add keyring support
	
        * daemon/gvfsbackenddav.c:
        * daemon/gvfsbackendsmb.c:
	Update to api changes

	This is the initial work on keyring support (#511517)
	Patch from Carlos Garcia Campos

2008-02-16  Christian Kellner  <gicmo@gnome.org>

	* daemon/gvfsbackenddav.c:
	* daemon/gvfsbackendhttp.c: 
	* daemon/soup-input-stream.c:
	* daemon/soup-output-stream.c:
	Use SoupSessionSync instead of SoupSessionAsync and 
	convert SoupStreams and authentication logic.

2008-02-15  Christian Kellner  <gicmo@gnome.org>

	* daemon/gvfsjobenumerate.c:
	Fix a little crasher (NULL terminate g_build_filename) that
	was introduced by the optional uri addition change to enumerate.

2008-02-15  Christian Kellner  <gicmo@gnome.org>

	* daemon/gvfsbackenddav.c: 
	Completly redo Multistatus parsing.

2008-02-15  Alexander Larsson  <alexl@redhat.com>

        * client/gdaemonfile.c:
	Pass uri in query_info_async too.

2008-02-15  Alexander Larsson  <alexl@redhat.com>

        * client/gdaemonfile.c:
	Pass an optional uri to query_info and enumerate
	
        * daemon/gvfsbackend.[ch]:
	Add automatic info filling, implement thumbnail
	checking if uri passed in.
	
	* daemon/gvfsjobenumerate.[ch]:
        * daemon/gvfsjobqueryinfo.[ch]:
	Get optional uri argument.
	Call automatic backend info filling.

2008-02-15  Christian Kellner  <gicmo@gnome.org>

	* daemon/gvfsbackendhttp.c: (g_vfs_backend_uri_for_filename):
	Escape the filename.

2008-02-14  Alexander Larsson  <alexl@redhat.com>

	* daemon/gvfsbackendcomputer.c:
	If lookup returns NULL it already set the error.
	Handle this in all callers.

2008-02-14  Alexander Larsson  <alexl@redhat.com>

	* daemon/Makefile.am:
	Disable install of ftp.mount for now

2008-02-14  Alexander Larsson  <alexl@redhat.com>

        * daemon/gvfschannel.c:
        Fix case where current_job has died (NULL) but
	the current_job_seq_nr was left and matched
	a sent cancel op. (#515959)

2008-02-13  Alexander Larsson  <alexl@redhat.com>

	* daemon/gvfsbackendsmb.c (do_read):
	Limit smb reads to 65535 bytes to avoid issues on
	large reads.

2008-02-13  Ryan Lortie  <desrt@desrt.ca>

	* daemon/gvfsbackendtrash.c:
	Keep track of the number of top level items in the trash.
	Expose this value via the trash::item-count attribute.

2008-02-13  Alexander Larsson  <alexl@redhat.com>

        * hal/ghalmount.c:
	Don't show nfs mounts (#516036)

2008-02-12  Alexander Larsson  <alexl@redhat.com>

	* hal/ghalvolumemonitor.c (g_hal_volume_monitor_finalize):
	Don't double free list optical disc list.

2008-02-11  Alexander Larsson  <alexl@redhat.com>

	* configure.ac:
	Post release version bump

=== gvfs 0.1.7 ===

2008-02-11  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update for release

2008-02-11  Alexander Larsson  <alexl@redhat.com>

        * daemon/gvfsbackendtrash.c:
	Set the correct copy name.
	Set description.

2008-02-11  Alexander Larsson  <alexl@redhat.com>

        * daemon/gvfsbackendsmb.c:
        (do_set_display_name):
	Fix typo: get_dirname, not get_basename.
	Fixes renames on smb (#514126)

2008-02-11  Alexander Larsson  <alexl@redhat.com>

        * daemon/gvfsbackendsftp.c:
	Set new path in set_display name.
	
        * daemon/gvfsjobsetdisplayname.c:
	Assert that new_path is set

2008-02-11  Alexander Larsson  <alexl@redhat.com>

        * client/gdaemonfile.c:
        * client/gdaemonfileinputstream.c:
        * client/gdaemonfileoutputstream.c:
        * common/gsysutils.c:
        * common/gvfsdaemonprotocol.c:
        * daemon/gvfsbackendburn.c:
        * daemon/gvfsbackendcdda.c:
        * daemon/gvfsbackenddav.c:
        * daemon/gvfsbackendsftp.c:
        * daemon/gvfsbackendsmb.c:
        * daemon/gvfsbackendsmbbrowse.c:
        * daemon/gvfsbackendtest.c:
        * daemon/gvfsdaemonutils.c:
        * daemon/gvfsjob.c:
        * daemon/mount.c:
        * daemon/pty_open.c:
	Save errno befor making other calls.
	Be safe when calling g_set_error()
	Patch from Christian Persch (#514822)

2008-02-11  Alexander Larsson  <alexl@redhat.com>

        * client/gdaemonfile.c:
        * daemon/gvfsbackendcomputer.c:
        * hal/ghalvolume.c:
        * programs/gvfs-mount.c:
	Update for the new mount flag argument.
	
        * hal/ghaldrive.c:
        * programs/gvfs-open.c:
	Fix warnings

2008-02-10  Luca Ferretti  <elle.uca@libero.it>

	* daemon/gvfsbackendburn.c: (g_vfs_backend_burn_init),
	(file_info_from_node):
	Rename burn:// with old "CD/DVD Creator" name.

	* daemon/gvfsbackendtrash.c: (g_vfs_backend_trash_init),
	(do_query_info):
	Rename trash:// with old "Trash" name.

2008-02-08  Alexander Larsson  <alexl@redhat.com>

        * hal/ghalvolume.c:
        Implement g_volume_should_automount.

2008-02-08  Alexander Larsson  <alexl@redhat.com>

        * daemon/gvfsbackendcomputer.c:
	Add "filesystem" to computer:
	
        * hal/ghalmount.c:
	Remove spew

2008-02-08  Alexander Larsson  <alexl@redhat.com>

        * hal/ghalmount.c:
	Try to find cdrom icons from autorun.inf.
	Based on patch from John Millikin

2008-02-08  Alexander Larsson  <alexl@redhat.com>

	* common/gvfsdaemonprotocol.c:
	Fix up indentation
	Don't unref file from g_file_icon_get_file().

2008-02-08  Alexander Larsson  <alexl@redhat.com>

	* daemon/gvfsbackendtrash.c:
	Always set CAN_TRASH to false
	
2008-02-08  Alexander Larsson  <alexl@redhat.com>

	* daemon/gvfsbackendtrash.c (unescape_pathname):
	Handle unescaping __ correctly (#514040)

2008-02-06  Alexander Larsson  <alexl@redhat.com>

        * daemon/gvfsbackendsftp.c:
        * daemon/gvfsbackendsmb.c:
	Ensure name is set in query_info (#511601)
	Clean up setting display name of /

2008-02-05  Alexander Larsson  <alexl@redhat.com>

	* client/gdaemonvolumemonitor.c (mount_removed):
	Don't spew warnings when hidden mounts are unmounted.
	
2008-02-05  Alexander Larsson  <alexl@redhat.com>

        * daemon/gvfsbackendtrash.c:
        (do_query_info):
	Correctly set the name for toplevel items.

2008-02-04  Tomas Bzatek  <tbzatek@redhat.com>

	* daemon/gvfsjobmakesymlink.c:
	Wrong symlink target passed to backend

2008-02-04  Alexander Larsson  <alexl@redhat.com>

	* README:
	Add some info in README

2008-02-04  Alexander Larsson  <alexl@redhat.com>

        * daemon/gvfsbackendsftp.c:
	Make name of sftp root be "/ on <host>" (#511515)

2008-02-04  Alexander Larsson  <alexl@redhat.com>

        * daemon/gvfsbackendsftp.c:
        * daemon/gvfsdaemonutils.c:
        * hal/ghalvolume.c:
	Cleanup i18n strings (#510192)

2008-02-04  Alexander Larsson  <alexl@redhat.com>

        * common/gvfsdaemonprotocol.h:
        * client/gdaemonfileinputstream.c:
        * client/gdaemonfileoutputstream.c:
        * daemon/gvfsreadchannel.c:
        * daemon/gvfswritechannel.c:
	Remove SEEK_CUR from channel protocol. This
	doesn't work with readahead, and can be converted
	to a SEEK_SET since we know the file position on
	the client side.

2008-02-04  Alexander Larsson  <alexl@redhat.com>

        * client/gdaemonfileinputstream.c:
        * client/gdaemonfileoutputstream.c:
	Init seq_nr to 1 so that seq_nr 0 is special
	(used for e.g. readahead ops)
	
        * daemon/gvfschannel.[ch]:
        * daemon/gvfsreadchannel.c:
	Implement readahead.

2008-02-03  Christian Kellner  <gicmo@gnome.org>

	* daemon/gvfsbackenddav.c:
	* daemon/gvfsbackendhttp.c:
	Move write logic (replace, create) to the dav backend.

2008-02-01  Alexander Larsson  <alexl@redhat.com>

        * daemon/gvfsreadchannel.c:
	Request larger buffers than the client requested
	so for better network efficiency. (#512472)

2008-02-01  Alexander Larsson  <alexl@redhat.com>

        * programs/gvfs-open.c:
	Pass on uris unmodified to avoid roundtripping
	through GFile which can be destructive.

2008-01-31  Alexander Larsson  <alexl@redhat.com>

	Implement uri navigation for http uris (#509341)
	
        * client/gvfsurimapper.[ch]:
        Add get_mount_info_for_path method for mount types
	like ssh that change MountInfo as the path changes.
	
        * client/httpuri.c:
	Implement get_mount_info_for_path.
	For http, set the path from the uri.
	The will be removed on i/o by the corresponding
	path being in the mount_prefix.
	
        * daemon/gvfsbackendhttp.c:
	Set mount_prefix to path from uri.
	Remove unused code in message_new_from_filename

        * client/gdaemonfile.c:
        * client/gdaemonvfs.[ch]:
	Use the new uri mapper function to change GMountInfo
	as the path changes.
	
2008-01-31  Alexander Larsson  <alexl@redhat.com>

        * common/gmountspec.[ch]:
        Add shared path canonicalization:
	g_mount_spec_canonicalize_path()

2008-01-31  Alexander Larsson  <alexl@redhat.com>

	* daemon/soup-input-stream.c:
	Handle errors in send_finish.

2008-01-30  Tomas Bzatek  <tbzatek@redhat.com>

	* daemon/gvfsbackendlocaltest.c:
	Use read/write operations instead of do_copy ()

2008-01-30  Alexander Larsson  <alexl@redhat.com>

        * client/gvfsfusedaemon.c:
	Set read and execute privs for all directories.
	Fix up type when reading can-read etc attributes.
	Don't use uid/gid in the fuse mount. The
	uid/gid doesn't make sense locally anyway.

2008-01-30  Alexander Larsson  <alexl@redhat.com>

        * daemon/gvfsbackend.c:
        (g_vfs_backend_register_mount):
	Correctly detect unset stable name

2008-01-29  Tomas Bzatek  <tbzatek@redhat.com>

	* daemon/gvfsbackendlocaltest.c:
	Fixed error handling in do_enumerate ()
	More cleanup

2008-01-29  Alexander Larsson  <alexl@redhat.com>

        * Makefile.am:
        * configure.ac:
        * gconf/Makefile.am: Added.
        * gconf/gapplookupgconf.[ch]: Added.
        * gconf/gconf-module.c: Added.
	Add gconf based implementation of
	g_app_info_get_default_for_uri_scheme ()

2008-01-29  Alexander Larsson  <alexl@redhat.com>

	* hal/ghalvolumemonitor.c (g_hal_volume_monitor_class_init):
	Remove setting prio/name

2008-01-29  Alexander Larsson  <alexl@redhat.com>

	* configure.ac:
	Require glib 2.15.5 for g_file_query_default_handler ().

        * programs/Makefile.am:
        * programs/gvfs-open.c:
	Added gvfs-open app

2008-01-29  Alexander Larsson  <alexl@redhat.com>

	* configure.ac:
	Post release version bump

=== gvfs 0.1.6 ===

2008-01-29  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update for release

        * daemon/Makefile.am:
	Always dist all .mount.in files
	
2008-01-28  Alexander Larsson  <alexl@redhat.com>

	* configure.ac:
	Post release version bump

=== gvfs 0.1.5 ===

2008-01-28  Alexander Larsson  <alexl@redhat.com>

        * daemon/daemon-main.c:
        * daemon/main.c:
	Include locate.h for setlocale

2008-01-28  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update for release

2008-01-28  Alexander Larsson  <alexl@redhat.com>

	* hal/hal-device.c:
	Use gi18n-lib.h, not gi18n.h in client side code.

2008-01-28  Alexander Larsson  <alexl@redhat.com>

	* client/gdaemonfile.c (g_daemon_file_move):
	Fix typo G_DAEMON_FILE -> G_IS_DAEMON_FILE

	* configure.ac:
	Require glib >= 2.15.4

        * client/gdaemonvfs.c:
        * client/gdaemonvolumemonitor.c:
        * hal/ghalvolumemonitor.c:
	Register with the new extension points API.

2008-01-28  Alexander Larsson  <alexl@redhat.com>

        * daemon/gvfsbackendlocaltest.c:
        * programs/gvfs-cat.c:
	C89 fixes from Jens Granseuer (#511838)

2008-01-28  Alexander Larsson  <alexl@redhat.com>

        * daemon/Makefile.am:
        * daemon/daemon-main.c:
        * daemon/main.c:
	Enable translations for daemons and some l10n
	fixes. Patch from Luca Ferretti.

2008-01-24  Matthias Clasen  <mclasen@redhat.com>

	* daemon/gvfsbackendsmbbrowse.c
	(get_file_info_from_entry): Replace : by :: in 
	smb::comment, too.

2008-01-24  Alexander Larsson  <alexl@redhat.com>

        * configure.ac:
	Update intltool req for po/LINGUAS

2008-01-24  Alexander Larsson  <alexl@redhat.com>

        * hal/ghalvolumemonitor.c:
	Remove debug spew.
	
        * hal/ghaldrive.c:
        * hal/ghalvolume.c:
	Implement identifier getters
	
        * programs/gvfs-mount.c:
	Show identifiers

2008-01-24  Alexander Larsson  <alexl@redhat.com>

        * daemon/gvfsdaemon.c:
	Indentation fix
	
        * hal/ghaldrive.[ch]:
        * hal/hal-device.c:
        * hal/ghalvolume.c:
        * hal/ghalmount.c:
	Clean up coding style
	
        * hal/ghalvolumemonitor.[ch]:
	Clean up coding style
	Don't show drives if we're ignoring all their
	volumes (and there are volumes)
	
        * hal/hal-pool.c:
	Clean up coding style
	Actually look at cap_only.
	Free private dbus_connection on error

2008-01-24  Bastien Nocera  <hadess@hadess.net>

	* programs/Makefile.am:
	* programs/gvfs-mkdir.c: (main): Add a test mkdir program

2008-01-23  Bastien Nocera  <hadess@hadess.net>

	* client/test-uri-utils.c: (main):
	* client/Makefile.am: Add test program for the
	functions in gvfsuriutils.c

	* client/gvfsuriutils.c: (g_vfs_decode_uri):
	Fix parsing of IPv6 URIs where the host is in brackets

2008-01-23  Alexander Larsson  <alexl@redhat.com>

        * daemon/gvfsbackendtrash.c:
        (add_extra_trash_info):
	Use -, not _ in attribute names

2008-01-23  Alexander Larsson  <alexl@redhat.com>

        * daemon/gvfsbackendtrash.c:
        (add_extra_trash_info):
	Use :: to delimit namespace for trash attributes

2008-01-22  Gil Forcada  <gforcada@gnome.org>

	* configure.ac: Added ca to ALL_LINUGAS.

2008-01-22  Alexander Larsson  <alexl@redhat.com>

        * daemon/gvfsbackendsftp.c:
	Ensure we return a IS_DIRECTORY error when
	we open a file for reading (#511225)
	The same needs to happen for writes.

2008-01-21  Alexander Larsson  <alexl@redhat.com>

	* configure.ac:
	Post release version bump

=== gvfs 0.1.4 ===

2008-01-21  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update for release

2008-01-21  Alexander Larsson  <alexl@redhat.com>

        * client/gdaemonfile.c:
        * client/sftpuri.c:
        * common/gmounttracker.c:
        * daemon/gvfsmonitor.c:
        * daemon/gvfsbackend.c:
	Fix warnings
	
        * daemon/gvfsbackendburn.c:
        * daemon/gvfsbackendlocaltest.c:
        * daemon/gvfsbackendtrash.c:
	Update to latest gio API (removal of
	duplicate GSeekable calls).
	
2008-01-21  Alexander Larsson  <alexl@redhat.com>

	* configure.ac:
	Post release version bump
	
=== gvfs 0.1.3 ===

2008-01-21  Alexander Larsson  <alexl@redhat.com>

        * NEWS:
	Update for release
	
        * daemon/Makefile.am:
        * daemon/main.c:
	Autospawn fuse on daemon start.
	
        * daemon/mount.c:
        (read_mountable_config):
	Remove debug spew

2008-01-21  Alexander Larsson  <alexl@redhat.com>

	* client/gvfsfusedaemon.c:
	Fix error with the names of the root items the
	fuse mount.

2008-01-21  Alexander Larsson  <alexl@redhat.com>

        * daemon/mount.c:
	Reload the list of mountables on SIGUSR1

2008-01-21  Christian Kellner  <gicmo@gnome.org>


	* daemon/gvfsbackenddav.c:
	Small cleanups.

	* daemon/gvfsbackendhttp.c: 
	* daemon/gvfsbackendhttp.h:
	Implement query_info for plain http.

2008-01-21  Alexander Larsson  <alexl@redhat.com>

        * client/Makefile.am:
        * client/gdaemonvfs.c:
        * client/sftpuri.c: Added.
	Added sftp uri mapper that aliases ssh: to sftp: (#509860)
	
        * client/smburi.c:
        (smb_from_uri):
	Fix leak.

2008-01-21  Alexander Larsson  <alexl@redhat.com>

        * common/gmounttracker.c:
	Do the initial mount tracker call sync so that
	the volume monitor is populated with the current
	status after construction. This is more in-line
	with what apps expect.

2008-01-18  Alexander Larsson  <alexl@redhat.com>

        * common/gmountspec.c:
        (g_mount_spec_new_from_data):
	Ensure that mount_prefix is never NULL. It
	should be "/" in that case.

2008-01-18  Luca Ferretti  <elle.uca@libero.it>

	* programs/Makefile.am:
	* programs/gvfs-cat.c: (cat), (main):
	Add i18n/l10n to gvfs-cat, plus indentation. For details see
	http://mail.gnome.org/archives/gnome-vfs-list/2008-January/msg00020.html

2008-01-18  David Zeuthen  <davidz@redhat.com>

	The volume monitor bits of gphoto2 support. The actual backend
	will follow later. Right now the code is only enabled on Linux,
	need trivial changes to work on other operating systems.

	* hal/ghalvolume.c: (do_update_from_hal_for_camera),
	(update_from_hal), (g_hal_volume_new):
	* hal/ghalvolumemonitor.c: (get_hal_pool),
	(g_hal_volume_monitor_finalize), (get_volumes),
	(mountpoints_changed), (mounts_changed),
	(g_hal_volume_monitor_force_update), (hal_changed),
	(g_hal_volume_monitor_constructor), (find_camera_volume_by_udi),
	(update_cameras):
	* hal/ghalvolumemonitor.h:
	* hal/hal-pool.c: (hal_pool_finalize), (has_cap_only),
	(hal_pool_add_device_by_udi),
	(hal_pool_add_device_by_udi_and_properties), (hal_pool_new):
	* hal/hal-pool.h:

2008-01-17  Christian Kellner  <gicmo@gnome.org>

	* daemon/gvfsbackenddav.c: 
	Disconnect signal handler, since the data struct we pass
	into the signal handler will be invalid after the mount
	is finished.

2008-01-17  Christian Kellner  <gicmo@gnome.org>

	* common/gmountsource.c:
	* common/gmountsource.h:
	Make g_mount_source_ask_password_async () public and add
	g_mount_source_ask_password_finish (). 

	* daemon/gvfsbackenddav.c: 
	Use g_mount_source_ask_password_async instead of the sync
	version so we don't hang during auth. Few cleanups.

	* programs/gvfs-mount.c: 
	Don't echo the password, if possible.

2008-01-17  Alexander Larsson  <alexl@redhat.com>

        * hal/ghalvolume.c:
        * hal/ghalvolumemonitor.c:
	Initial work on LUKS, from david.

2008-01-17  Alexander Larsson  <alexl@redhat.com>

        * common/gvfsdaemonprotocol.h:
        * client/gdaemonfile.c:
	Add upload operation (requires latest glib)
	
        * daemon/gvfsbackend.[ch]:
        * daemon/gvfsjobupload.[ch]: Added.
	Implement upload in daemon
	
        * daemon/Makefile.am:
        * daemon/burn.mount.in: Added.
        * daemon/gvfsbackendburn.[ch]: Added.
	Added initial burn:/// implementation.
	Not fully implemented, but read works.
	
        * daemon/gvfsbackendcomputer.c:
	Ensure we set right mimetype for dirs

2008-01-16  Christian Kellner  <gicmo@gnome.org>

	* daemon/gvfsbackenddav.c:	
	* daemon/gvfsbackendhttp.c:
	* daemon/gvfsbackendhttp.h:
	A few cleanups.

2008-01-16  Christian Kellner  <gicmo@gnome.org>

	* daemon/gvfsbackenddav.c: 
	* daemon/gvfsbackendhttp.c:
	* daemon/gvfsbackendhttp.h:
	* daemon/soup-input-stream.c:
	* daemon/soup-output-stream.c:
	Port to libsoup-2.4.

	* configure.ac:
	* daemon/Makefile.am:
	Make building of http optional (and depend on wether
	libsoup is found or not)
	Patch from Dan Winship.

2008-01-16  Frederic Crozat  <fcrozat@mandriva.com>

	* Makefile.am: Only build hal module when hal support is
	enabled (#509693).

2008-01-15  Alexander Larsson  <alexl@redhat.com>

        * client/gdaemonfile.c:
        * daemon/daemon-main.c:
        * daemon/gvfsbackendcdda.c:
        * daemon/gvfsbackendcomputer.c:
        * daemon/gvfsbackendftp.c:
        * daemon/gvfsbackendlocaltest.c:
        * daemon/gvfsbackendsftp.c:
        * daemon/gvfsbackendsmb.c:
        * daemon/gvfsbackendsmbbrowse.c:
        * daemon/gvfsbackendtrash.c:
        * daemon/gvfsjobsetattribute.c:
        * hal/ghaldrive.c:
	Clean up strings and add translator comments

2008-01-15  Alexander Larsson  <alexl@redhat.com>

        * daemon/gvfsbackendcomputer.c:
        (recompute_files):
	Fix crash (#508236)
	Patch from Joe Marcus Clarke

2008-01-15  David Zeuthen  <davidz@redhat.com>

	* hal/ghaldrive.c: (_eject_unmount_mounts_cb),
	(_eject_unmount_mounts), (g_hal_drive_eject):
	* hal/ghalvolume.c: (g_hal_volume_new), (g_hal_volume_can_mount),
	(g_hal_volume_has_device_path), (g_hal_volume_mount),
	(g_hal_volume_eject):
	* hal/ghalvolume.h:
	* hal/ghalvolumemonitor.c:
	(g_hal_volume_monitor_lookup_volume_for_device_path),
	(update_volumes), (update_mounts), (update_discs):
	Fix debug spew and use try device path before mount path to tie
	volume and mount objects together. Also fix some issues with
	mounting and unmounting.
	
2008-01-15  Daniel Nylander <po@danielnylander.se>

	* configure.ac: Added sv to ALL_LINGUAS.

2008-01-14  Alexander Larsson  <alexl@redhat.com>

	* configure.ac:
	Post release version bump

=== gvfs 0.1.2 ===

2008-01-14  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update for release

2008-01-14  Alexander Larsson  <alexl@redhat.com>

	* configure.ac (DISTCHECK_CONFIGURE_FLAGS):
	Require glib 2.15.2

2008-01-14  Alexander Larsson  <alexl@redhat.com>

        * client/gdaemonfile.c:
        * daemon/gvfsbackendlocaltest.c:
        * daemon/gvfsbackendtrash.c:
        * programs/gvfs-monitor-dir.c:
        * programs/gvfs-monitor-file.c:
	Update to new gio API

2008-01-14  Alexander Larsson  <alexl@redhat.com>

        * client/gdaemonfile.c:
        (match_prefix):
	Handle root correctly in g_file_get_relative_path (#508719)

2008-01-14  Alexander Larsson  <alexl@redhat.com>

        * daemon/gvfsdaemon.c:
	Don't translate g_warning strings

2008-01-14  Alexander Larsson  <alexl@redhat.com>

        * client/httpuri.c:
        (http_from_uri):
	Only set "ssl" key in dav case.
	
2008-01-14  Alexander Larsson  <alexl@redhat.com>

        * client/httpuri.c:
        (http_to_uri_scheme):
	Fix some crashes
	
2008-01-13  Dan Winship  <danw@gnome.org>

	* client/httpuri.c (http_from_uri): fix

	* daemon/soup-output-stream.c: Initial SoupOutputStream; still
	works like gnome-vfs http did, by storing all the writes in memory
	until close.

	* daemon/gvfsbackendhttp.c (try_create, try_replace): Implement.
	For now we need to do HEAD-then-PUT, but we may later be able to
	do a single PUT with "Expect: 100-continue".
	(try_write, try_close_write): Implement.

2008-01-13  Christian Kellner <gicmo@gnome.org>

	* client/httpuri.c: 
	Also handle dav uris in the http mapper.

	* daemon/dav.mount.in:
	* daemon/Makefile.am:
	Add the new dav backend.

	* daemon/gvfsbackendhttp.c: 
	* daemon/gvfsbackendhttp.h:
	Implement a utility function so dav and http
	backend can share uri from filename creation.

	* daemon/gvfsbackenddav.c: 
	First attempt to write the dav backend as a subclass of http.
	Mount, QueryInfo, Enumerate should work and Read is provided
	by the base class.

2008-01-12  Leonid Kanter <leon@asplinux.ru>

	* configure.ac: Added "ru" (Russian) to ALL_LINGUAS.

2008-01-12  Alexander Larsson  <alexl@redhat.com>

        * daemon/Makefile.am:
	Set the http daemon dbus busname so that multiple mounts
	work in the same process.

2008-01-11  Dan Winship  <danw@gnome.org>

	* daemon/soup-input-stream.c: implement GSeekable (a bit hackishly
	due to a bug in libsoup 2.2.x)

	* daemon/gvfsbackendhttp.c (try_seek_on_read): implement

2008-01-11  Dan Winship  <danw@gnome.org>

	* daemon/gvfsbackendhttp.c (g_vfs_backend_http_finalize): cleanup
	(g_vfs_backend_http_init): move session creation here. Don't
	explicitly set ASYNC_CONTEXT to g_main_context_default() because
	that trips up SoupInputStream.
	(uri_for_filename): create a SoupUri corresponding to a filename.
	In particular, "/" corresponds to mount_base, not the result of
	combining mount_base with "/".
	(try_open_for_read): use uri_for_filename, free the result.

2008-01-11  Dan Winship  <danw@gnome.org>

	* daemon/soup-input-stream.c (soup_input_stream_send)
	(wrapper_callback, soup_input_stream_send_async): Fix for changes
	to g_input_stream_set_pending() since I wrote this.

	* client/gdaemonfile.c (g_daemon_file_hash): x86_64 fix.

2008-01-11  Alexander Larsson  <alexl@redhat.com>

        * daemon/gvfsbackendhttp.c:
	Make http mount not user visible.
	Set backend mount spec in try_mount.

2008-01-11  Christian Kellner  <gicmo@gnome.org>

	* client/gdaemonvfs.c:
	Fix the double use of a counter variable inside nested loops.

	* client/Makefile.am:
	* client/httpuri.c:
	UriMapper added, which is needed for plain http method.
	
	* configure.ac:
	Check for libsoup version >= 2.2.104

	* daemon/gvfsbackendhttp.c:
	Initial implementation of plain http methods.

	* daemon/Makefile.am:
	* daemon/http.mount.in:
	Added.

	* daemon/soup-input-stream.c:
	* daemon/soup-input-stream.h:
	Import of Dan Winship's libsoup based streaming classes.

2008-01-11  Inaki Larranaga Murgoitio  <dooteo@euskalgnu.org>

	* configure.ac: Added "eu" (Basque) to ALL_LINGUAS.

2008-01-11  Alexander Larsson  <alexl@redhat.com>

        * daemon/gvfsbackendcomputer.c:
	Set can't write info on the root.

2008-01-11  Alexander Larsson  <alexl@redhat.com>

	* programs/gvfs-mount.c (list_volumes):
	Fix crash if no mount in volume.

2008-01-11  Alexander Larsson  <alexl@redhat.com>

        * client/gdaemonfile.c:
        * common/gvfsdaemonprotocol.h:
	Implement unmount_mountable and eject_mountable
	on client side.
	
        * common/gmountoperationdbus.c:
	Fix warnings
	
        * daemon/gvfsbackend.[ch]:
        * daemon/gvfsjobunmountmountable.[ch]:
	Add unmount_mountable and eject_mountable in daemon.
	
        * daemon/gvfsbackendcomputer.c:
	Implement unmount_mountable and eject_mountable

        * daemon/gvfsbackendlocaltest.c:
	Update to latest API
	
        * daemon/gvfsbackendsftp.c:
	Fix indentation
	
        * daemon/gvfsjobunmount.c:
	Always allow unmount if unmount is not
	implemented.

2008-01-11  Christian Kellner  <gicmo@gnome.org>

	* configure.ac:
	* daemon/Makefile.am:
	* daemon/gvfsbackendhttp.c:
	* daemon/gvfsbackendhttp.h:
	Initial attempt of writing the http backend. Not much
	there yet only a stub.

2008-01-10  Alexander Larsson  <alexl@redhat.com>

        * daemon/gvfsbackend.h:
        * daemon/gvfsmonitor.[ch]:
        * daemon/gvfsbackendcomputer.c:
        * daemon/gvfsbackendtrash.c:
	Make GVfsMonitor API simpler for users.

2008-01-10  Alexander Larsson  <alexl@redhat.com>

        * daemon/gvfsmonitor.c:
	Remove freeing of initial ref after delay.

        * daemon/gvfsjobcreatemonitor.[ch]:
	Set the monitor as result here, not only the obj path.
	Nicer and allows better lifetime handling.
	If returning a obj ref, keep the monitor alive for
	some time to allow a subscribe request.
	
        * daemon/gvfsbackendcomputer.c:
        * daemon/gvfsbackendtrash.c:
	Update to the new APIs

2008-01-10  Alexander Larsson  <alexl@redhat.com>

        * common/gmounttracker.c:
	Handle error reply from list_mounts.

        * programs/gvfs-mount.c:
	Add option to list mounts.
	Based on patch from nf2@scheinwelt.at

2008-01-09  Alexander Larsson  <alexl@redhat.com>

        * hal/ghaldrive.c:
        * hal/ghalmount.c:
        * hal/ghalvolume.c:
	Use default fallbacks for icons

2008-01-09  Alexander Larsson  <alexl@redhat.com>

        * common/gmountsource.[ch]:
	Add g_mount_source_get_operation() that lets
	you handle a remote GMountSource as if it
	was a GMountOperation.
	
        * common/gmountoperationdbus.c:
        * programs/gvfs-mount.c:
	Update to new GMountOperation APIs
	
        * client/gdaemonfile.c:
        * daemon/gvfsjobmountmountable.[ch]:
	Also let you return target by uri, as not all
	targets are from gvfs.
	
        * daemon/gvfsbackendcomputer.c:
	Initial cut at mount_mountable

2008-01-09  Alexander Larsson  <alexl@redhat.com>

	* client/gdaemonvfs.c (_g_daemon_vfs_get_mount_info_sync):
	Better error return on not mounted.

2008-01-09  Luca Ferretti  <elle.uca@libero.it>

	* Makefile.am:
	* autogen.sh:
	* configure.ac:

	Reuse intltool by now, glib-gettext rules seems unable
	to properly remove "[encoding: UTF-8]" generating
	po/POTFILES.
	
	* mkinstalldirs:

	Removed, autogenerated by intltool

2008-01-08  Alexander Larsson  <alexl@redhat.com>

	* configure.ac:
	Post release version bump

=== gvfs 0.1.1 ===

2008-01-08  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update for release
	
2008-01-08  Alexander Larsson  <alexl@redhat.com>

	* configure.ac:
	Require glib 2.15.1

2008-01-08  Alexander Larsson  <alexl@redhat.com>

        * daemon/Makefile.am:
        * daemon/computer.mount.in:
        * daemon/gvfsbackendcomputer.[ch]:
	Add initial computer backend
	
        * daemon/gvfsbackend.h:
        * daemon/gvfsjobunmountmountable.[ch]:
	Add umount_mountable calls

2008-01-07  Alexander Larsson  <alexl@redhat.com>

        * client/Makefile.am:
        * client/gdaemondirectorymonitor.[ch]:
        * client/gdaemonfile.c:
        * daemon/gvfsbackendtrash.c:
        * programs/gvfs-monitor-dir.c:
	Update to handle removed GDirectoryMonitor from
	API.
	
        * daemon/gvfsbackendsftp.c:
	Fix warnings

2008-01-07  Alexander Larsson  <alexl@redhat.com>

        * daemon/gvfsbackendsftp.c:
	Remove debug spew
	
2008-01-07  Alexander Larsson  <alexl@redhat.com>

        * daemon/gvfsbackendsftp.c:
	Update to new gio API

2008-01-04  Alexander Larsson  <alexl@redhat.com>

        * daemon/gvfsbackendsftp.c:
        (make_reply_stream):
	Update to new gio API

2008-01-03  Matthias Clasen  <mclasen@redhat.com>

	* daemon/Makefile.am: Install the .mount files
	in /usr/share/gvfs/mounts, not in /etc/gvfs/mounts

2008-01-03  Alexander Larsson  <alexl@redhat.com>

        * hal/ghalvolumemonitor.c:
	Handle pool finalizing on unloads of hal module
	(#507037)

2008-01-03  Alexander Larsson  <alexl@redhat.com>

        * daemon/gvfsbackendsftp.c:
	Return icons
	
2008-01-03  Alexander Larsson  <alexl@redhat.com>

        * daemon/gvfsbackendsftp.c:
	Use right types for file times (#506494)

2008-01-03  Alexander Larsson  <alexl@redhat.com>

        * daemon/gvfsbackendsftp.c:
	Don't return errors on EOF (#506493)

2008-01-03  Alexander Larsson  <alexl@redhat.com>

        * Makefile.am:
        * mkinstalldirs: Added.
	Added mkinstalldirs to svn and EXTRA_DIST ase
	we now don't gettextize in autogen.

2008-01-03  Alexander Larsson  <alexl@redhat.com>

        * hal/ghaldrive.c:
        (_drive_get_description):
	Fix plus/minus utf8 string.
	Patch from Luca Ferretti.

2007-12-20  Alexander Larsson  <alexl@redhat.com>

	* configure.ac:
	Post release version bump

=== gvfs 0.1.0 ===

2007-12-20  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update for release

	* configure.ac:
	Bump version to 0.1.0

2007-12-20  Alexander Larsson  <alexl@redhat.com>

        * autogen.sh:
	Don't run gettextize
	
        * programs/Makefile.am:
	dist gvfs-less

2007-12-20  Alexander Larsson  <alexl@redhat.com>

        * daemon/main.c:
	Fix translated "".
	
        * hal/ghaldrive.c:
	Encode +/- as utf8 c escapes

2007-12-20  Alexander Larsson  <alexl@redhat.com>

	* configure.ac:
	Require glib 2.15.0
	
2007-12-20  Alexander Larsson  <alexl@redhat.com>

        * client/gvfsfusedaemon.c:
        * daemon/gvfsbackendsftp.c:
        * daemon/gvfsbackendsmb.c:
        * daemon/gvfsbackendsmbbrowse.c:
        * daemon/gvfsbackendtrash.c:
        * daemon/gvfsjobqueryinfo.c:
        * programs/gvfs-copy.c:
        * programs/gvfs-ls.c:
        * programs/gvfs-move.c:
        * test/benchmark-gvfs-big-files.c:
        * test/benchmark-gvfs-small-files.c:
	Update to new file attribute names

2007-12-20  Alexander Larsson  <alexl@redhat.com>

        * client/gdaemonmount.c:
        * hal/ghaldrive.c:
        * hal/ghalmount.c:
        * hal/ghalvolume.c:
        * programs/gvfs-mount.c:
	Update to new unmount flag api

2007-12-20  Alexander Larsson  <alexl@redhat.com>

        * client/gdaemonfileinputstream.c:
        * client/gdaemonfileoutputstream.c:
        * client/gdaemonvfs.c:
        * client/gvfsfusedaemon.c:
	Fix warnings

2007-12-20  Alexander Larsson  <alexl@redhat.com>

        * daemon/Makefile.am:
	Build without cdda.
	Patch from nf2@scheinwelt.at

2007-12-19  David Zeuthen  <davidz@redhat.com>

	Add missing files from previous patch.

	* daemon/cdda.mount.in:
	* daemon/gvfsbackendcdda.c: (g_vfs_backend_cdda_finalize),
	(g_vfs_backend_cdda_init), (do_mount), (try_mount), (do_unmount),
	(get_track_num_from_name), (free_read_handle), (create_header),
	(do_open_for_read), (paranoia_callback), (do_read),
	(do_seek_on_read), (do_close_read), (set_info_for_track),
	(do_query_info), (do_enumerate), (g_vfs_backend_cdda_class_init):
	* daemon/gvfsbackendcdda.h:
	* programs/gvfs-less:

2007-12-19  Alexander Larsson  <alexl@redhat.com>

        * client/gdaemonvfs.[ch]:
        * client/gdaemonvolumemonitor.c:
        * hal/ghalvolumemonitor.c:
        * hal/hal-module.c:
	Remove spew
	Update for new APIs
	Don't use GDaemonVolumeMonitor if not using GDaemonVfs.
	
        * hal/hal-pool.c:
	Close custom dbus connection before unrefing

2007-12-19  David Zeuthen  <davidz@redhat.com>

	Add the cdda:// backend for Compact Disc Digital Audio discs.

	Allow a backend to specify the fuse name directly instead of
	using the display name

	Make GDaemonVolumeMonitor and GDaemonMount use the new
	adopt_orphan_mount() function on GVolumeMonitor in gio. Also,
	since a GMount now can be associated with a GVolume, implement
	eject().

	Add a new gvfs-less program.

	Make gvfs-mount capable of unmounting as well.

	HAL backend changes: attempt to unmount all mounts from
	enclosing volumes and fail the ejection if one of the unmount
	operations fails. Use new adopt_orphan_mount() from gio to
	adopt cdda:// volumes for audio discs. Emit the 'eject-button'
	signal on GDrive. Various other fixes.

	* client/gdaemonfile.c: (g_daemon_file_find_enclosing_mount):
	* client/gdaemonmount.c: (g_daemon_mount_finalize),
	(g_daemon_mount_new), (g_daemon_mount_get_volume),
	(g_daemon_mount_get_drive), (g_daemon_mount_can_eject),
	(foreign_volume_removed), (g_daemon_mount_set_foreign_volume),
	(eject_wrapper_callback), (g_daemon_mount_eject),
	(g_daemon_mount_eject_finish), (g_daemon_mount_mount_iface_init):
	* client/gdaemonmount.h:
	* client/gdaemonvolumemonitor.c: (mount_added), (mount_removed),
	(g_daemon_volume_monitor_init):
	* client/gvfsfusedaemon.c: (file_handle_close_stream),
	(free_file_handle_for_path), (mount_record_new):
	* common/gmounttracker.c: (g_mount_info_dup), (g_mount_info_unref),
	(g_mount_info_from_dbus):
	* common/gmounttracker.h:
	* configure.ac:
	* daemon/Makefile.am:
	* daemon/gvfsbackend.c: (g_vfs_backend_finalize),
	(g_vfs_backend_init), (g_vfs_backend_set_fuse_name),
	(g_vfs_backend_get_fuse_name), (g_vfs_backend_register_mount):
	* daemon/gvfsbackend.h:
	* daemon/gvfsjobunmount.c: (unregister_mount_callback),
	(send_reply):
	* daemon/mount.c: (vfs_mount_free), (vfs_mount_to_dbus),
	(register_mount), (list_mounts):
	* hal/ghaldrive.c: (g_hal_drive_finalize), (hal_condition),
	(g_hal_drive_new), (spawn_cb), (g_hal_drive_eject_do),
	(free_unmount_mounts_op), (_eject_unmount_mounts_cb),
	(_eject_unmount_mounts), (g_hal_drive_eject):
	* hal/ghalmount.c: (g_hal_mount_finalize), (unmount_cb),
	(unmount_read_error), (unmount_do), (g_hal_mount_unmount),
	(eject_wrapper_callback), (g_hal_mount_eject),
	(g_hal_mount_eject_finish):
	* hal/ghalvolume.c: (g_hal_volume_finalize), (do_update_from_hal),
	(g_hal_volume_new), (g_hal_volume_get_mount),
	(foreign_mount_unmounted), (g_hal_volume_adopt_foreign_mount),
	(g_hal_volume_has_foreign_mount_root), (spawn_cb),
	(mount_foreign_callback), (g_hal_volume_mount),
	(g_hal_volume_mount_finish), (eject_wrapper_callback),
	(g_hal_volume_eject), (g_hal_volume_eject_finish):
	* hal/ghalvolume.h:
	* hal/ghalvolumemonitor.c: (adopt_orphan_mount),
	(g_hal_volume_monitor_class_init), (update_volumes),
	(update_mounts), (update_discs):
	* hal/hal-device.c: (hal_device_class_init),
	(_hal_device_hal_condition):
	* hal/hal-device.h:
	* hal/hal-marshal.list:
	* hal/hal-pool.c: (hal_pool_class_init), (_hal_condition),
	(hal_pool_new):
	* hal/hal-pool.h:
	* programs/Makefile.am:
	* programs/gvfs-mount.c: (unmount_done_cb), (unmount), (main):

2007-12-18  Luca Ferretti  <elle.uca@libero.it>

	* configure.ac: Add ALL_LINGUAS and definition for GVFS_LOCALEDIR;
	the second one is unused by now, but could be needed, so all
	l10n stuff in this file should be OK.

2007-12-17  David Zeuthen  <davidz@redhat.com>

	* hal/ghalvolumemonitor.c (update_mounts): g_get_unix_mounts()
	was renamed to g_unix_mounts_get() in gio

	* hal/hal-pool.c, Makefile.am: Instead of dbus-glib-1, use the
	function _g_dbus_connection_integrate_with_main() for mainloop
	integration.

	* hal/ghalmount.h, hal/ghalvolume.h, hal/ghaldrive.h: Use a weak
	pointer for the volume monitor

	* configure.ac: Don't require dbus-glib-1 for the hal vm backend

2007-12-17  David Zeuthen  <davidz@redhat.com>

	* client/gdaemonmount.c (g_daemon_mount_mount_iface_init): Fix typo
	with setting the can_eject() function

2007-12-17  Bastien Nocera  <hadess@hadess.net>

	* daemon/gvfsbackendtrash.c: (list_trash_dirs):
	Fix build, renamed g_get_unix_mounts to g_unix_mounts_get

2007-12-17  Alexander Larsson  <alexl@redhat.com>

        * hal/ghaldrive.[ch]:
        * hal/ghalmount.[ch]:
        * hal/ghalvolume.[ch]:
        * hal/ghalvolumemonitor.[ch]:
        * hal/hal-device.[ch]:
        * hal/hal-module.c:
        * hal/hal-pool.[ch]:
	Make types dynamic and update to support volume monitor
	backend name and is_supported().

2007-12-17  Alexander Larsson  <alexl@redhat.com>

	* client/gdaemonmount.c (g_daemon_mount_mount_iface_init):
	Eject not supported. Make vtable NULL.

2007-12-14  David Zeuthen  <davidz@redhat.com>

	* Makefile.am:
	* client/gdaemonmount.c: (g_daemon_mount_get_uuid),
	(g_daemon_mount_can_eject), (g_daemon_mount_eject),
	(g_daemon_mount_eject_finish), (g_daemon_mount_mount_iface_init):
	* client/gdaemonvolumemonitor.c: (get_volume_for_uuid),
	(get_mount_for_uuid), (g_daemon_volume_monitor_class_init):
	* configure.ac:
	* hal/*: new files

	Update to latest gio API changes and add the HAL backend for
	volume monitoring.

2007-12-14  Alexander Larsson  <alexl@redhat.com>

        * client/gdaemonfile.c:
        * client/gdaemonfileinputstream.c:
        * client/gvfsfusedaemon.c:
        * common/gvfsdaemonprotocol.c:
        * common/gvfsdaemonprotocol.h:
        * daemon/gvfsbackend.h:
        * daemon/gvfsjobsetattribute.c:
        * daemon/gvfsjobsetattribute.h:
        * programs/gvfs-info.c:
        * programs/gvfs-ls.c:
	Update for gio API changes (removal of GFileAttributeValue).

2007-12-14  Alexander Larsson  <alexl@redhat.com>

        * client/gdaemonfile.c:
        * common/gmountsource.c:
        * common/gmountsource.h:
        * daemon/gvfsbackendsftp.c:
        * daemon/gvfsbackendsmb.c:
        * programs/gvfs-info.c:
        * programs/gvfs-monitor-dir.c:
        * programs/gvfs-monitor-file.c:
        * programs/gvfs-mount.c:
        * programs/gvfs-save.c:
        * test/benchmark-gvfs-big-files.c:
        * test/benchmark-gvfs-small-files.c:
	Update to new gio flag enum types/values

2007-12-14  Alexander Larsson  <alexl@redhat.com>

        * client/gdaemondirectorymonitor.c:
        * client/gdaemondirectorymonitor.h:
        * client/gdaemonfile.c:
        * client/gdaemonfile.h:
        * client/gdaemonfileenumerator.c:
        * client/gdaemonfileenumerator.h:
        * client/gdaemonfileinputstream.c:
        * client/gdaemonfileinputstream.h:
        * client/gdaemonfilemonitor.c:
        * client/gdaemonfilemonitor.h:
        * client/gdaemonfileoutputstream.c:
        * client/gdaemonfileoutputstream.h:
        * client/gdaemonmount.c:
        * client/gdaemonmount.h:
        * client/gdaemonvfs.c:
        * client/gdaemonvfs.h:
        * client/gdaemonvolumemonitor.h:
        * client/gvfsdaemondbus.c:
        * client/gvfsdaemondbus.h:
        * client/gvfsfusedaemon.c:
        * client/gvfsurimapper.h:
        * client/smburi.c:
        * common/gdbusutils.c:
        * common/gdbusutils.h:
        * common/gmountoperationdbus.c:
        * common/gmountoperationdbus.h:
        * common/gmountsource.c:
        * common/gmountsource.h:
        * common/gsysutils.c:
        * common/gvfsdaemonprotocol.c:
        * common/gvfsdaemonprotocol.h:
        * daemon/gvfsbackend.h:
        * daemon/gvfsbackendftp.c:
        * daemon/gvfsbackendsftp.c:
        * daemon/gvfsbackendsmb.c:
        * daemon/gvfsbackendsmbbrowse.c:
        * daemon/gvfsbackendtest.c:
        * daemon/gvfsbackendtrash.c:
        * daemon/gvfsdaemonutils.c:
        * daemon/gvfsjob.c:
        * daemon/gvfsjob.h:
        * daemon/gvfsjobcopy.h:
        * daemon/gvfsjobcreatemonitor.h:
        * daemon/gvfsjobdelete.h:
        * daemon/gvfsjobenumerate.h:
        * daemon/gvfsjobmakedirectory.h:
        * daemon/gvfsjobmakesymlink.h:
        * daemon/gvfsjobmount.h:
        * daemon/gvfsjobmountmountable.h:
        * daemon/gvfsjobmove.h:
        * daemon/gvfsjobqueryattributes.h:
        * daemon/gvfsjobqueryfsinfo.h:
        * daemon/gvfsjobqueryinfo.h:
        * daemon/gvfsjobsetattribute.h:
        * daemon/gvfsjobsetdisplayname.h:
        * daemon/gvfsjobtrash.h:
        * daemon/gvfsjobunmount.h:
        * daemon/gvfsmonitor.h:
        * daemon/mount.c:
        * daemon/mount.h:
        * programs/gvfs-cat.c:
        * programs/gvfs-copy.c:
        * programs/gvfs-info.c:
        * programs/gvfs-ls.c:
        * programs/gvfs-monitor-dir.c:
        * programs/gvfs-monitor-file.c:
        * programs/gvfs-mount.c:
        * programs/gvfs-move.c:
        * programs/gvfs-rm.c:
        * programs/gvfs-save.c:
        * programs/gvfs-trash.c:
        * test/benchmark-gvfs-big-files.c:
        * test/benchmark-gvfs-small-files.c:
        * test/benchmark-posix-big-files.c:
        * test/benchmark-posix-small-files.c:
	Only use <gio/gio.h> include 

2007-12-13  Alexander Larsson  <alexl@redhat.com>

        * client/gdaemonfile.c:
        * programs/gvfs-mount.c:
	Update for g_mount_for_location to g_file_mount_enclosing_volume change.

2007-12-11  David Zeuthen  <davidz@redhat.com>

	Update for API changes in gio trunk.

	* client/Makefile.am:
	* client/gdaemonfile.c: (g_daemon_file_find_enclosing_mount),
	(g_daemon_file_file_iface_init):
	* client/gdaemonvolumemonitor.c: (get_mounts), (get_volumes),
	(find_mount_by_mount_info), (mount_added), (mount_removed),
	(g_daemon_volume_monitor_init), (g_daemon_volume_monitor_finalize),
	(g_daemon_volume_monitor_class_init):
	* client/gdaemonvolumemonitor.h:
	* client/gvfsfusedaemon.c: (mount_record_new),
	(mount_record_for_mount_exists), (mount_list_update),
	(mount_tracker_mounted_cb), (mount_tracker_unmounted_cb),
	(subthread_main):
	* daemon/gvfsbackendtrash.c: (list_trash_dirs):

2007-12-05  Alexander Larsson  <alexl@redhat.com>

        * client/gdaemonvfs.c:
        (g_daemon_vfs_init):
	Use the new API to load the modules

2007-12-05  Alexander Larsson  <alexl@redhat.com>

        * client/gdaemonfile.c:
        * client/gdaemonfileenumerator.c:
        * client/gdaemonfileinputstream.c:
        * client/gdaemonfileoutputstream.c:
	Update to gio API change

2007-11-27  Alexander Larsson  <alexl@redhat.com>

        * client/gdaemonfileinputstream.c:
        * client/gdaemonfileoutputstream.c:
        * client/gdaemonvfs.c:
        * client/gvfsfusedaemon.c:
        * client/gvfsuriutils.h:
        * daemon/gvfsbackend.c:
        * daemon/gvfsbackendsftp.c:
        * daemon/gvfsbackendtrash.c:
        * daemon/gvfschannel.c:
        * daemon/gvfsmonitor.c:
        * daemon/mount.c:
	Update to build with the latest glib included
	gio
	
2007-11-27  Alexander Larsson  <alexl@redhat.com>

        * Makefile.am:
        * configure.ac:
        * programs/Makefile.am:
        * programs/gvfs-cat.c:
        * programs/gvfs-copy.c:
        * programs/gvfs-info.c:
        * programs/gvfs-ls.c:
        * programs/gvfs-monitor-dir.c:
        * programs/gvfs-monitor-file.c:
        * programs/gvfs-mount.c:
        * programs/gvfs-move.c:
        * programs/gvfs-rm.c:
        * programs/gvfs-save.c:
        * programs/gvfs-trash.c:
	Moved the gio tools from gio-standalone

2007-11-20  Alexander Larsson  <alexl@redhat.com>

        * daemon/gvfsbackendsftp.c:
	Add comment
	
        * daemon/gvfsbackendsmb.c:
	Support new WOULD_MERGE error code

2007-11-16  Alexander Larsson  <alexl@redhat.com>

        * client/gdaemonfile.c:
        * client/gdaemonfileinputstream.c:
        * client/gdaemonfileoutputstream.c:
        * client/smburi.c:
        * common/gdbusutils.c:
        * common/gmountsource.c:
        * daemon/gvfsbackendftp.c:
        * daemon/gvfsbackendtrash.c:
        * daemon/gvfsdaemon.c:
        * daemon/gvfsjob.c:
        * daemon/gvfsjobdbus.c:
        * daemon/gvfsjobopenforwrite.h:
        * daemon/mount.c:
        * daemon/pty_open.c:
        * test/benchmark-gvfs-big-files.c:
        * test/benchmark-gvfs-small-files.c:
        * test/benchmark-posix-small-files.c:
	Code cleanups from Kjartan Maraas.

2007-11-15  Alexander Larsson  <alexl@redhat.com>

	* configure.ac:
	Post release version bump

=== gvfs 0.0.2 ===

2007-11-15  Alexander Larsson  <alexl@redhat.com>

	* configure.ac:
	Require gio 0.1.2

	* NEWS:
	Update for release

2007-11-15  Alexander Larsson  <alexl@redhat.com>

        * daemon/Makefile.am:
        * daemon/ftp.mount.in:
        * daemon/gvfs-daemon.service.in:
        * daemon/sftp.mount.in:
        * daemon/smb-browse.mount.in:
        * daemon/smb.mount.in:
        * daemon/trash.mount.in:
	Rename gvfs daemon processes to start
	with "gvfsd". This is shorter and nicer.

2007-11-14  Alexander Larsson  <alexl@redhat.com>

        * common/gvfsdaemonprotocol.h:
	Add unmount operation and
	unregister mount mounttracker call
	
        * client/gdaemonvolume.c:
	Implement client side of unmount
	
        * daemon/Makefile.am:
        * daemon/gvfsjobunmount.[ch]: Added.
	Add unmount job type
	
        * daemon/gvfsbackend.[ch]:
	Implement unmount

2007-11-14  Alexander Larsson  <alexl@redhat.com>

        * common/gdbusutils.c:
	Handle NULL callback in _g_dbus_connection_call_async
	
        * daemon/gvfsdaemon.c:
	Re-register backends with new main daemons

2007-11-14  Alexander Larsson  <alexl@redhat.com>

        * client/gdaemonvfs.[ch]:
        * client/gvfsdaemondbus.c:
	Make sure we somewhat cleanly handle the
	various dbus daemons going down. By somewhat
	I mean that no problem should be persistant
	even if you might get some transient error
	messages.

	Unfortunately the only way to be able to cleanly
	handle this involves globally ignoring SIGPIPE.
	What can I say, unix sucks.
	
        * common/gsysutils.c:
        (_g_socket_receive_fd):
	Handle errors if e.g. the fd is closed

2007-11-13  Alexander Larsson  <alexl@redhat.com>

        * common/gsysutils.c:
        * daemon/gvfschannel.c:
        * daemon/gvfsdaemonutils.c:
        * daemon/gvfsjobcopy.c:
        * daemon/gvfsmonitor.c:
        * daemon/gvfswritechannel.c:
	Add required includes for solaris
	Patch from Damien Carbery

2007-11-12  Alexander Larsson  <alexl@redhat.com>

        * client/gvfsurimapper.[ch]:
	Make this class dynamic
	
        * client/Makefile.am:
        * client/gdaemonvfs.c:
        * client/smburi.c:
	Build smb uri mapper into module
	(this avoids extra .so files)

2007-11-12  Alexander Larsson  <alexl@redhat.com>

        * common/gmountspec.[ch]:
        (g_mount_spec_new_from_data):
        (g_mount_spec_set_with_len):
	Add new functions
	
        * client/Makefile.am:
        * common/Makefile.am:
	Update for moved files
	Build non-shared version of common libs.
	Ups non-shared common libs in client module.

        * common/gvfsuriutils.[ch]: Removed.
        * client/gvfsuriutils.[ch]: Added.
	Moved uriutils to gvfs (not used by daemon)
	Re-namespace to g_vfs_*
	
        * common/gvfsurimapper.[ch]: Removed.
        * client/gvfsurimapper.[ch]: Added.
	Move UriMapper to client lib
	Remove/Hide use of GMountSpec
	
        * client/gdaemonvfs.c:
        * client/smburi.c:
	Update to the new APIs
	
        * client/gvfsfusedaemon.c:
        * daemon/gvfsbackendtrash.c:
        * daemon/gvfsjobqueryfsinfo.c:
	Fix warnings

2007-11-08  Alexander Larsson  <alexl@redhat.com>

        * daemon/gvfsdaemon.c:
        * daemon/gvfsjobmove.c:
        * test/benchmark-common.c:
	Fixes for solaris build.
	Patches from Damien Carbery

2007-11-07  Sebastian Dröge  <slomo@circular-chaos.org>

	* daemon/gvfsbackendsftp.c:
	Update g_memory_output_stream_set_free_on_close() to
	g_memory_output_stream_set_free_data().

2007-11-07  Alexander Larsson  <alexl@redhat.com>

        * client/gdaemonvfs.c:
	Update to new gvfs construction API

2007-11-07  Alexander Larsson  <alexl@redhat.com>

        * common/gdbusutils.c:
        * daemon/gvfsbackendtest.c:
        * daemon/gvfsbackendtrash.c:
	Ansi C fixes from Jens Granseuer

2007-11-06  Sebastian Dröge  <slomo@circular-chaos.org>

	* configure.ac:
	* daemon/gvfsdaemonutils.c: (dbus_connection_send_fd):
	* daemon/mount.c: (vfs_mount_to_dbus), (dbus_message_function):
	Fix typo: availible -> available.

2007-11-06  Alexander Larsson  <alexl@redhat.com>

	* configure.ac:
	Post release version bump

=== gvfs 0.0.1 ===

2007-11-06  Alexander Larsson  <alexl@redhat.com>

        * client/Makefile.am:
        * daemon/Makefile.am:
        * test/Makefile.am:
	Fix make distcheck

2007-11-06  Alexander Larsson  <alexl@redhat.com>

        * client/gdaemonfile.c:
        (g_daemon_file_file_iface_init):
	Actually export get_uri_scheme
	
        * client/gdaemonfileinputstream.c:
        (g_daemon_file_input_stream_query_info):
	Set NOT_SUPPORTED error

2007-11-06  Alexander Larsson  <alexl@redhat.com>

        * common/gmountoperationdbus.c:
        * common/gmounttracker.c:
        * daemon/gvfsbackend.h:
        * daemon/gvfschannel.h:
	Remove use of old giotypes.h header

2007-11-03  Paolo Borelli  <pborelli@katamail.com>

	* client/gdaemonvfs.c (get_mountspec_from_uri):
	Do not leak the decoded uri.

2007-11-02  Sebastien Bacher  <seb128@ubuntu.com>

	* common/Makefile.am: use the correct gmountoperationdbus.h naming

2007-11-01  Christian Kellner  <gicmo@gnome.org>

	* client/*.[ch]:
	* common/*.[ch]:
	* daemon/*.[ch]:
	* test/*.[ch]:
	Add copyright information to source files.

2007-11-01  Alexander Larsson  <alexl@redhat.com>

        * client/gdaemonfile.c:
        * client/gdaemonvfs.[ch]:
	Implement get_uri_scheme
	
        * daemon/mount.c:
	Add needed includes

2007-10-31  Alexander Larsson  <alexl@redhat.com>

        * client/gdaemonfile.c:
	Implement contains_file and get_relative_path

2007-10-31  Alexander Larsson  <alexl@redhat.com>

        * daemon/gvfsbackend.[ch]:	
        Add g_vfs_backend_get_mount_spec
	
        * daemon/gvfsjobqueryfsinfo.c:
	Fix indentation
	
        * daemon/gvfsjobqueryinfo.c:
	Implement id:fs attribute

2007-10-31  Alexander Larsson  <alexl@redhat.com>

	* client/gdaemonvolume.c:
	Remove get_platform_id
	
2007-10-31  Alexander Larsson  <alexl@redhat.com>

        * client/gdaemonfile.c:
	Implement find_enclosing_volume
	
        * client/gdaemonvolume.[ch]:
        * client/gdaemonvolumemonitor.c:
	No need to pass volume monitor when
	createing volumes

2007-10-31  Alexander Larsson  <alexl@redhat.com>

        * common/gmounttracker.[ch]:
	Add all mount info to GMountInfo
	Make it refcounted
	
        * client/gdaemonvfs.[ch]:
        * client/gdaemonfile.c:
        * client/gdaemonvolumemonitor.c:
	Remove GMountRef, replacing its use with
	GMountInfo

2007-10-31  Alexander Larsson  <alexl@redhat.com>

        * daemon/gvfsjobqueryfsinfo.c:
	Remove volume name attribute

2007-10-31  Alexander Larsson  <alexl@redhat.com>

        * daemon/gvfsbackendtrash.c:
	Update to new API
	
2007-10-30  Alexander Larsson  <alexl@redhat.com>

        * common/gmounttracker.c:
	Handle threads not being initialized
	
        * daemon/gvfsjobqueryfsinfo.c:
	Set volume name

2007-10-26  Alexander Larsson  <alexl@redhat.com>

        * client/gdaemonvolumemonitor.c:
	Don't show not user visible mounts

        * daemon/mount.c:
	Don't give fuse mounts for non visible mounts
	(as they don't get mounted)
	
        * daemon/gvfsbackendsmbbrowse.c:
        * daemon/gvfsbackendtrash.c:
	Mark as not user visible
	
2007-10-26  Alexander Larsson  <alexl@redhat.com>

        * common/gvfsdaemonprotocol.h:
	Add registerFuse call
	
        * client/gvfsfusedaemon.c:
	Register with vfs daemon
	Exit (and unmount) if daemon dies
	
        * daemon/mount.c:
	Hand out fuse mountpaths when availible.
	
        * client/gdaemonvfs.[ch]:
        * common/gmounttracker.c:
	Handle sent fuse mountpath
	
        * client/gdaemonfile.c:
	Implement g_daemon_file_get_path using fuse
	if availible.

2007-10-26  Alexander Larsson  <alexl@redhat.com>

        * client/Makefile.am:
        * client/gvfsfusedaemon.c:
	Update fuse daemon to use the giomodule instead of
	linking to a copy of the code. The old way was
	problematic with the module code being a dynamic
	type in the module and not in the fuse daemon.

2007-10-25  Alexander Larsson  <alexl@redhat.com>

        * client/smburi.c:
        * common/gvfsurimapper.[ch]:
	Make to_uri_scheme return const string.
	
        * client/gdaemonfile.[ch]:
        * client/gdaemonvfs.[ch]:
        Add _g_daemon_vfs_mountspec_has_uri_scheme and use it to
	implement g_file_has_uri_scheme

2007-10-24  Alexander Larsson  <alexl@redhat.com>

        * common/gmountsource.c:
        (g_mount_source_ask_password):
	Increase password dialog timeout to 30 minutes

2007-10-24  Alexander Larsson  <alexl@redhat.com>

        * common/gmountspec.c:
        (g_mount_spec_set_mount_prefix):
	Actually assign the mount_prefix in the GMountSpec

2007-10-23  Sebastian Dröge  <slomo@circular-chaos.org>

	* client/Makefile.am:
	Change the GIO module dir to $(libdir)/gio/modules as was
	done in GIO.

2007-10-23  Alexander Larsson  <alexl@redhat.com>

        * client/gdaemonfile.c:
        * client/gdaemonvfs.c:
        * common/gmountspec.[ch]:
	Ensure GDaemonFile mount specs are actually unique.
	When a non-unique mount spec was finalized any unique
	version of the same was removed from the hashtable.

2007-10-23  Alexander Larsson  <alexl@redhat.com>

        * client/gdaemonvfs.c:
        (_g_daemon_vfs_get_uri_for_mountspec):
	Better handling for default types.
	(Handle hostname, port and username)

2007-10-22  Alexander Larsson  <alexl@redhat.com>

        * client/gdaemonvfs.c:
        * common/gvfsuriutils.[ch]:
        * daemon/gvfsbackendtrash.c:
	Update to use the gurifuncs.h from gio.
	Fix filename parsing to handle ~/x

2007-10-19  Alexander Larsson  <alexl@redhat.com>

        * daemon/gvfsbackend.[ch]:
	Rename set_icon -> set_icon_name
	Add getter for icon_name and display_name
	
        * daemon/gvfsbackendsmb.c:
        * daemon/gvfsbackendsmbbrowse.c:
	Update for API changes
	Set display name for in fileinfo

        * daemon/gvfsbackendsftp.c:
        * daemon/gvfsbackendtrash.c:
	Update for API changes

	
2007-10-19  Alexander Larsson  <alexl@redhat.com>

        * client/gdaemonfile.c:
        (g_daemon_file_hash): Faster hash, since mount_spec is unique
        (g_daemon_file_equal): Compare mount spec too
	
        * daemon/gvfsbackendsmb.c:
        * daemon/gvfsbackendsmbbrowse.c:
	Set volume display names and icons
	Set content type and icon for files

2007-10-19  Alexander Larsson  <alexl@redhat.com>

        * common/gmounttracker.[ch]:
        * client/gdaemonvfs.c:
        * daemon/mount.c:
	Add user_visible to mount info
	Reorder args so that new stuff comes at the end
	
        * daemon/gvfsbackend.[ch]:
	Add user_visible setting
	Fix up various setters that set the wrong variable
	
        * daemon/gvfsbackendtrash.c:
	Add icon and better display name

2007-10-19  Alexander Larsson  <alexl@redhat.com>

        * client/gdaemonvfs.[ch]:
        * client/gdaemonvolume.c:
        * client/gdaemonvolumemonitor.[ch]:
	Implement using DEFINE_DYNAMIC_TYPE
	Actually register GDaemonVolumeMonitor in giomodule
	
        * common/gmounttracker.c:
	Update to the on-dbus format for mounts

2007-10-19  Alexander Larsson  <alexl@redhat.com>

	* client/smburi.c (smb_to_uri):
	No port by default

2007-10-16  Alexander Larsson  <alexl@redhat.com>

        * client/gdaemonfile.c:
        (g_daemon_file_get_parent):
	Fix get_parent to handle files that are in the root directory

2007-10-16  Alexander Larsson  <alexl@redhat.com>

        * common/gvfsdaemonprotocol.[ch]:
	Make sending icons actually work
	
        * daemon/gvfsbackendtrash.c:
	Set icon for toplevel
	
        * daemon/gvfsmonitor.c:
        Initialize error before call

2007-10-12  Alexander Larsson  <alexl@redhat.com>

        * daemon/gvfsdaemon.c:
	Build fixes
	Patch from Milosz Derezynski <internalerror@gmail.com>

2007-10-10  Alexander Larsson  <alexl@redhat.com>

        * daemon/gvfsbackendtrash.c:
	Support file monitor on trash:/// (for icon)

2007-10-10  Alexander Larsson  <alexl@redhat.com>

        * daemon/gvfsbackendtrash.c:
	Add support for directory monitor on root dir

2007-10-09  Alexander Larsson  <alexl@redhat.com>

        * daemon/gvfsbackendtrash.c:
	Correctly handle len arg in unescape_pathname
	
2007-10-09  Alexander Larsson  <alexl@redhat.com>

        * daemon/gvfsbackendtrash.c:
	Nicer filenames for things in the home trash.
	This is the common case, so lets make them look nice.

2007-10-09  Alexander Larsson  <alexl@redhat.com>

        * daemon/gvfsbackendtrash.c:
	Check for trash dirs in fork to avoid getting stuck
	on e.g. hanged nfs dirs

2007-10-09  Alexander Larsson  <alexl@redhat.com>

        * client/Makefile.am:
        * client/gdaemonfile.c:
        * client/gdaemonfilemonitor.[ch]:
	Implement file monitor in client
	
        * common/gvfsdaemonprotocol.h:
        * daemon/gvfsbackend.c:
	Implement file monitor in daemon
	
        * daemon/gvfsbackendtrash.c:
	Implement file monitor in trash backend
	Make trash filename escaping nicer

2007-10-09  Alexander Larsson  <alexl@redhat.com>

        * configure.ac:
	Pull in gio-unix-2.0
	
        * daemon/gvfsbackendtrash.c:
	Use GUnixMounts instead of volume monitor
	This shows *all* mounts and avoids unnecessary stuff

2007-10-08  Alexander Larsson  <alexl@redhat.com>

        * common/gvfsdaemonprotocol.h:
	Add defines for monitoring
	
        * client/Makefile.am:
        * client/gdaemondirectorymonitor.[ch]: 
        * client/gdaemonfilemonitor.[ch]:
        * client/gdaemonfile.c:
	Add daemon directory monitor and initial work on file monitor
	
        * client/gdaemonfileenumerator.c:
	Make path_counter private
	Return DBUS_HANDLER_RESULT_HANDLED when handling messages.
	
        * client/gdaemonvfs.[ch]:
	Make _g_mount_ref_ref "public"
	
        * client/gvfsdaemondbus.c:
	Handle NULL callbacks for async calls
	
        * daemon/Makefile.am:
        * daemon/gvfsbackend.[ch]:
        * daemon/gvfsjobcreatemonitor.[ch]:
	Add create_dir_monitor and create_file_monitor.
	Add g_vfs_backend_get_daemon
	
        * daemon/gvfsmonitor.[ch]:
	Helper code for monitors
	
        * daemon/gvfsbackendtrash.c:
	Implement directory monitor for trash dirs

2007-10-08  Sebastian Dröge  <slomo@circular-chaos.org>

	* client/gdaemonvfs.c: (g_daemon_vfs_finalize),
	(g_daemon_vfs_init), (fill_supported_uri_schemes),
	(g_daemon_vfs_get_supported_uri_schemes),
	(g_daemon_vfs_class_init):
	* client/smburi.c: (smb_to_uri_scheme),
	(g_vfs_uri_mapper_smb_class_init):
	* common/gvfsdaemonprotocol.h:
	* common/gvfsurimapper.c: (g_vfs_uri_mapper_to_uri_scheme):
	* common/gvfsurimapper.h:
	* daemon/mount.c: (list_mount_types), (dbus_message_function):
	Implement get_supported_uri_schemes method and add a GVfsUriMapper
	method to map a mount spec to an URI scheme.

2007-10-05  Alexander Larsson  <alexl@redhat.com>

        * daemon/gvfsbackendtrash.c:
        Add delete support to trash

2007-10-04  Alexander Larsson  <alexl@redhat.com>

        * common/gvfsuriutils.c:
        (g_uri_unescape_string):
	Allow NULL end pointer

        * daemon/gvfsjob.[ch]:
	Add cancellable to GVfsJob for backends that want one
	
        * daemon/gvfsjobenumerate.[ch]:
        * daemon/gvfsjobqueryinfo.[ch]:
	Also store attribute in string form.
	Needed if you want to pass it on into gio.
	
        * daemon/Makefile.am:
        * daemon/gvfsbackendtrash.[ch]:
        * daemon/trash.mount.in: Added.
	Added trash backend

2007-10-04  Alexander Larsson  <alexl@redhat.com>

        * TODO:
        * client/gdaemonfile.c:
        * client/gvfsfusedaemon.c:
        * daemon/gvfsbackend.h:
        * daemon/gvfsbackendftp.c:
        * daemon/gvfsbackendsftp.c:
        * daemon/gvfsbackendsmb.c:
        * daemon/gvfsjobopenforwrite.[ch]:
        * test/benchmark-gvfs-big-files.c:
        * test/benchmark-gvfs-small-files.c:
	Add GFileCreateFlags flag to open for write.
	No actual backend support yet though.

2007-10-02  Sebastian Dröge  <slomo@circular-chaos.org>

	* client/gdaemonfile.c: (g_daemon_file_append_to),
	(g_daemon_file_create), (g_daemon_file_replace):
	* test/benchmark-gvfs-big-files.c: (create_file):
	* test/benchmark-gvfs-small-files.c: (create_file): Update to API
	changes in gio.

	* daemon/gvfschannel.c:
	* daemon/gvfsreadchannel.c:
	* daemon/gvfswritechannel.c:
	* daemon/main.c:
	Drop unecessary includes.

2007-09-29  Sebastian Dröge  <slomo@circular-chaos.org>

	* configure.ac: Revert accidentally included local change.

2007-09-29  Sebastian Dröge  <slomo@circular-chaos.org>

	* configure.ac: Update to the new pkg-config filename.
	* gio-standalone.pc.in: Remove pkg-config file that belongs to gio.

2007-09-27  Sebastian Dröge  <slomo@circular-chaos.org>

	* daemon/gvfsbackendftp.c: (do_replace), (do_query_info),
	(do_query_fs_info), (do_enumerate):
	Update signatures for API changes in gio.

2007-09-25  Alexander Larsson  <alexl@redhat.com>

        * client/gvfsdaemondbus.c:
	Clear VfsConnectionData on creation
	(fixes read of uninitialized data on thread shutdown)
	
        * daemon/sftp.mount.in:
	Correct the type to "sftp"

2007-09-25  Alexander Larsson  <alexl@redhat.com>

        * daemon/mount.c:
	Return NOT_SUPPORTED error for unsupported uri types

2007-09-25  Alexander Larsson  <alexl@redhat.com>

        * client/gvfsfusedaemon.c:
        * daemon/gvfsbackendsmbbrowse.c:
	Update for G_IO_ERROR_NOT_MOUNTABLE_FILE name change

2007-09-25  Alexander Larsson  <alexl@redhat.com>

        * common/gmountoperationdbus.[ch]:
        * common/gmounttracker.[ch]:
	Pass in DBusConnection to use instead of using default one
	
        * client/gdaemonfile.c:
        * client/gdaemonvfs.[ch]:
        * client/gvfsdaemondbus.c:
	Use private dbus connection even for async calls, since the
	mainloop integration is conflicting with dbus-glib.
	This is a temporary measure until this is solved in a better way.
	
        * client/gdaemonvolumemonitor.c:
        * client/gvfsfusedaemon.c:
        * daemon/gvfsbackendsmbbrowse.c:
	Update to the API changes

2007-09-25  Sebastian Dröge  <slomo@circular-chaos.org>

	* client/gdaemonvfs.c: (g_daemon_vfs_finalize):
	Don't unref wrapped_vfs as it's just a pointer to the single instance
	return value of g_vfs_get_local().

2007-09-25  Sebastian Dröge  <slomo@circular-chaos.org>

	* client/gdaemonfile.c: (g_daemon_file_resolve_relative_path),
	(g_daemon_file_file_iface_init):
	* test/benchmark-gvfs-big-files.c: (create_file):
	* test/benchmark-gvfs-small-files.c: (create_file):
	Update for API change in GIO. g_file_resolve_relative was renamed
	to g_file_resolve_relative_path.

2007-09-25  Sebastian Dröge  <slomo@circular-chaos.org>

	* common/gmountspec.c: (g_mount_spec_to_dbus_with_path):
	* common/gvfsdaemonprotocol.c: (_g_dbus_append_file_attribute),
	(_g_dbus_append_file_info), (_g_dbus_append_attribute_info_list):
	* daemon/mount.c: (vfs_mount_to_dbus):
	Don't pass the contained signature when creating a DBus struct. Since
	DBus 1.1.0 this will lead to an assertion. The signature will filled
	automatically while adding values to the struct.

2007-09-17  Alexander Larsson  <alexl@redhat.com>

        * client/gdaemonfile.c:
        * client/gdaemonfileinputstream.c:
        * client/gdaemonfileoutputstream.c:
        * client/gvfsfusedaemon.c:
        * common/gvfsdaemonprotocol.h:
        * daemon/Makefile.am:
        * daemon/gvfsbackend.[ch]:
        * daemon/gvfsbackendftp.c:
        * daemon/gvfsbackendsftp.c:
        * daemon/gvfsbackendsmb.c:
        * daemon/gvfsbackendsmbbrowse.c:
        * daemon/gvfsbackendtest.c:
        * daemon/gvfsjobenumerate.h:
        * daemon/gvfsjobgetfsinfo.[ch]: Removed.
        * daemon/gvfsjobgetinfo.[ch]: Removed.
        * daemon/gvfsjobqueryfsinfo.[ch]: Added.
        * daemon/gvfsjobqueryinfo.[ch]: Added.
        * daemon/gvfsjobsetattribute.[ch]:
        * test/benchmark-gvfs-big-files.c:
        * test/benchmark-gvfs-small-files.c:
	Update with the get_info -> query_info rename in gio

2007-09-17  Alexander Larsson  <alexl@redhat.com>

        * daemon/gvfsbackendsftp.c:
	Update to new GDataInputStream function names 

2007-09-14  Alexander Larsson  <alexl@redhat.com>

        * client/gdaemonfileoutputstream.c:
        (g_daemon_file_output_stream_get_etag):
	Update to new get_etag API.

2007-09-14  Alexander Larsson  <alexl@redhat.com>

        * daemon/gvfsbackendsftp.c:
	Add etag support for close on write

I stopped tracked changes here. Look at "git log" instead.
		
2006-09-28  Alexander Larsson  <alexl@redhat.com>

	* gfilesimple.[ch]:
	Move GFileSimple struct into c file	

2006-09-28  Alexander Larsson  <alexl@redhat.com>

	* gfile.[ch]:
	Add follow_symlinks argument to get_info
	
	* gfileinfo.[ch]:
	Some mask fixes
	
	* gfilesimple.c:
	More implementation work
	
	* glocalfileoutputstream.[ch]:
	Implement set_original_mtime and set_create_backup

2006-09-28  Alexander Larsson  <alexl@redhat.com>

	* Makefile:
	Add gfilesimple
	
	* gfile.[ch]:
	Add g_file_copy()
	Finish rename to parse_name
	Remove set_keep_open for now
	
	* gfilesimple.[ch]:
	Initial skeleton for GFileSimple
	Handle parse names
	
	* gvfssimple.c:
	Handle parse names

2006-09-28  Alexander Larsson  <alexl@redhat.com>

	* gfileenumerator.c:
	* gfileinfo.c:
	* gfileinputstream.c:
	* gfileoutputstream.c:
	* ginputstream.c:
	* glocalfileinputstream.c:
	* glocalfileoutputstream.c:
	* goutputstream.c:
	* gvfssimple.c:
	Use macro-created parent_class

2006-09-28  Alexander Larsson  <alexl@redhat.com>

	* gfile.c:
	* gvfs.[ch]:
	* gvfssimple.c:
	Clean up parse_name names.

2006-09-28  Alexander Larsson  <alexl@redhat.com>

	* gfile.[ch]:
	Add request flags & attributes
	Use FileStreams
	
	* gfileinputstream.h:
	* gfileoutputstream.h:
	Fix G_TYPE_... defines
	
	* glocalfileoutputstream.c:
	Small cleanups and mention gedit.

2006-09-27  Alexander Larsson  <alexl@redhat.com>

	* gfileinfo.[ch]:
	Added g_file_info_new, g_file_info_set_from_stat
	
	* glocalfileinputstream.c:
	* glocalfileoutputstream.c:
	Implemented get_file_info.

2006-09-27  Alexander Larsson  <alexl@redhat.com>

	* glocalfileoutputstream.c:
	Update implementation of final mtime

2006-09-27  Alexander Larsson  <alexl@redhat.com>

	* gfileinfo.h:
	* gfileinputstream.[ch]:
	* gfileoutputstream.[ch]:
	Flags & attributes in get_file_info

2006-09-27  Alexander Larsson  <alexl@redhat.com>

	* Makefile:
	* ginputstreamfile.[ch]:
	* goutputstreamfile.[ch]:
	* glocalfileinputstream.[ch]:
	* glocalfileoutputstream.[ch]:
	Rename local file streams and make them
	inherit from FileInput/OutputStream
	
	* test.c:
	Update

2006-09-27  Alexander Larsson  <alexl@redhat.com>

	* Makefile:
	* gfileinputstream.[ch]:
	* gfileoutputstream.[ch]:
	Add new classes.
	
	* gfileinfo.[ch]:
	Add flags, symlink_target and edit_name
	
	* ginputstream.[ch]
	* goutputstream.[ch]:
	Export close/pending state a bit
	
	* gvfserror.h:
	Add NOT_SUPPORTED

2006-09-27  Alexander Larsson  <alexl@redhat.com>

	* ginputstream.c:
	* goutputstream.c:
	Wrap async callback to automatically handle
	setting of pending, closed and ref/unref of the stream.

2006-09-27  Alexander Larsson  <alexl@redhat.com>

	reviewed by: <delete if not using a buddy>

	* ginputstream.c: (read_async_callback_wrapper),
	(g_input_stream_read_async), (skip_async_callback_wrapper),
	(g_input_stream_skip_async), (close_async_callback_wrapper),
	(g_input_stream_close_async), (read_op_report), (read_op_free),
	(g_input_stream_real_read_async), (skip_op_report), (skip_op_free),
	(g_input_stream_real_skip_async), (close_op_report),
	(close_op_free), (g_input_stream_real_close_async):
	* goutputstream.c: (write_async_callback_wrapper),
	(g_output_stream_write_async), (flush_async_callback_wrapper),
	(g_output_stream_flush_async), (close_async_callback_wrapper),
	(g_output_stream_close_async):

2006-09-27  Alexander Larsson  <alexl@redhat.com>

	* ginputstream.[ch]:
	Update of close and pending handling.
	
	* goutputstream.[ch]:
	Implement default async version
	
2006-09-27  Alexander Larsson  <alexl@redhat.com>

	* Makefile:
	Add output file streams
	
	* ginputstream.c: (g_input_stream_is_cancelled):
	Cleanup
	
	* ginputstreamfile.[ch]:
	remove get_fd.
	
	* goutputstream.[ch]:
	Add g_output_stream_is_cancelled
	Add padding
	Add cancel_async
	
	* goutputstreamfile.[ch]:
	Add new class
	
	* gvfserror.h:
	Add new errors
	
	* test.c:
	Some tests
	
2006-09-26  Alexander Larsson  <alexl@redhat.com>

	* Makefile:
	Add gthread-2.0
	
	* ginputstream.h:
	add async_skip and is_cancelled.
	
	* ginputstream.c:
	Implement async fallbacks using thread
	
	* ginputstreamfile.c:
	Handle cancellation
	
	* gioscheduler.c:
	Schedule cancelled jobs first
	Fix out-of-lock reads of job
	Add g_io_job_mark_done().
	
	* gioscheduler.h:
	Add g_io_job_mark_done().
	
	* test.c:
	Add some stream tests

